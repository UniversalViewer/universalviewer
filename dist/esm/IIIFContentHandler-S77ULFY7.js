import{a as ji}from"./chunk-PF4XA5YC.js";import{a as Os,g as Si}from"./chunk-JVQXRAW4.js";import{f as Ti,g as dn}from"./chunk-EQPD2MMQ.js";import{b as Hs,c as Bs}from"./chunk-YAXTLTJC.js";var Fi=Hs((Ri,Li)=>{(function(E,d){var ie=d.jQuery;typeof Ri=="object"?Li.exports=ie?E(d,ie):function(U){return E(d,U)}:typeof define=="function"&&define.amd?define(["jquery"],function(U){return E(d,U)}):E(d,!1)})(function(E,d){"use strict";var ie=d===!1;if(d=d||E.jQuery,!d||!d.fn)throw"JsViews requires jQuery";var U="v0.9.83",x,F,T,A,I,J,H,ne,D,V,pe,ye,un,Fe,j,ce,Se,Ie,en,De,Ce,nn,cn,vt,Ms,Bi=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,Oi=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,En,Bn=/[ \t]*(\r\n|\n|\r)/g,yt=/\\(['"])/g,xt=/['"\\]/g,Mi=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,Ui=/^if\s/,On=/<(\w+)[>\s]/,Ji=/[\x00`><"'&=]/g,Di=/[\x00`><\"'&=]/,wt=/^on[A-Z]|^convert(Back)?$/,Qi=/^\#\d+_`[\s\S]*\/\d+_`$/,Pi=Ji,Wi=0,Et={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},ke="html",Be="object",Mn="data-jsv-tmpl",Ne="jsvTmpl",It="For #index in nested block use #getIndex().",Ct={},In=E.jsrender,Vi=In&&d&&!d.render,Un={template:{compile:St},tag:{compile:es},viewModel:{compile:is},helper:{},converter:{}};I={jsviews:U,sub:{View:tn,Err:Qn,tmplFn:Wn,parse:Jt,extend:fe,extendCtx:Xe,syntaxErr:be,onStore:{},addSetting:Ft,settings:{allowCode:!1},advSet:Dn,_ths:Jn,_tg:function(){},_cnvt:Ni,_tag:Zi,_er:Oe,_err:Ot,_html:Kn,_cp:Cn,_sq:function(e){return e==="constructor"&&be(""),e}},settings:{delimiters:kn,advanced:function(e){return e?(fe(Se,e),j.advSet(),Ie):Se}},getCtx:Cn,map:Ht};function kt(e,n){return function(){var t,i=this,s=i.base;return i.base=e,t=n.apply(i,arguments),i.base=s,t}}function At(e,n){return D(n)&&(n=kt(e?e._d?e:kt(Dn,e):Dn,n),n._d=1),n}function Jn(e,n){for(var t in n.props)wt.test(t)&&(e[t]=At(e[t],n.props[t]))}function Cn(e){return e}function Dn(){return""}function qi(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch{}return this.base?this.baseApply(arguments):e}function Qn(e){this.name=(d.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function fe(e,n){for(var t in n)e[t]=n[t];return e}(Qn.prototype=new Error).constructor=Qn;function kn(e,n,t){return e?V(e)?kn.apply(I,e):(ce.delimiters=[e,n,cn=t?t.charAt(0):cn],en=e.charAt(0),De=e.charAt(1),Ce=n.charAt(0),nn=n.charAt(1),e="\\"+en+"(\\"+cn+")?\\"+De,n="\\"+Ce+"\\"+nn,F="(?:(\\w+(?=[\\/\\s\\"+Ce+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+Ce+"]|\\"+Ce+"(?!\\"+nn+"))*?)",j.rTag="(?:"+F+")",F=new RegExp("(?:"+e+F+"(\\/)?|\\"+en+"(\\"+cn+")?\\"+De+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+n,"g"),j.rTmpl=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+n),Ie):ce.delimiters}function Ki(e,n){!n&&e!==!0&&(n=e,e=void 0);var t,i,s,r,f=this,l=!n||n==="root";if(e){if(r=n&&f.type===n&&f,!r)if(t=f.views,f._.useKey){for(i in t)if(r=n?t[i].get(e,n):t[i])break}else for(i=0,s=t.length;!r&&i<s;i++)r=n?t[i].get(e,n):t[i]}else if(l)for(;f.parent;)r=f,f=f.parent;else for(;f&&!r;)r=f.type===n?f:void 0,f=f.parent;return r}function Tt(){var e=this.get("item");return e?e.index:void 0}Tt.depends=function(){return[this.get("item"),"index"]};function jt(){return this.index}jt.depends="index";function zi(e,n){var t,i,s=this,r=s.ctx;if(r&&(r=r[e]),r===void 0&&(r=un[e]),r&&r._cp){if(n)return i=j._ceo(r[1].deps),i.unshift(r[0]),i._cp=!0,i;r=I.getCtx(r)}return r&&D(r)&&!r._wrp&&(t=function(){return r.apply(!this||this===E?s:this,arguments)},t._wrp=s,fe(t,r)),t||r}function Gi(e){return e&&(e.fn?e:this.getRsc("templates",e)||pe(e))}function Ni(e,n,t,i){var s,r,f=typeof t=="number"&&n.tmpl.bnds[t-1],l=n.linkCtx;return i!==void 0?t=i={props:{},args:[i]}:f&&(t=f(n.data,n,j)),r=t.args[0],(e||f)&&(s=l&&l.tag,s||(s=fe(new j._tg,{_:{inline:!l,bnd:f,unlinked:!0},tagName:":",cvt:e,flow:!0,tagCtx:t}),l&&(l.tag=s,s.linkCtx=l),t.ctx=Xe(t.ctx,(l?l.view:n).ctx)),s._er=i&&r,Jn(s,t),t.view=n,s.ctx=t.ctx||s.ctx||{},t.ctx=void 0,r=s.cvtArgs(e!=="true"&&e)[0],r=f&&n._.onRender?n._.onRender(r,n,s):r),r??""}function Xi(e){var n=this,t=n.tagCtx,i=t.view,s=t.args;return e=e||n.convert,e=e&&(""+e===e?i.getRsc("converters",e)||Oe("Unknown converter: '"+e+"'"):e),s=!s.length&&!t.index?[i.data]:e?s.slice():s,e&&(e.depends&&(n.depends=j.getDeps(n.depends,n,e.depends,e)),s[0]=e.apply(n,s)),s}function Yi(e,n){for(var t,i,s=this;t===void 0&&s;)i=s.tmpl&&s.tmpl[e],t=i&&i[n],s=s.parent;return t||I[e][n]}function Zi(e,n,t,i,s,r){n=n||A;var f,l,o,u,g,m,c,h,a,_,b,C,y,k,p,v,w,L,X,B,S,R="",W=n.linkCtx||0,Q=n.ctx,$=t||n.tmpl,G=typeof i=="number"&&n.tmpl.bnds[i-1];for(e._is==="tag"?(f=e,e=f.tagName,i=f.tagCtxs,u=f.template):(o=n.getRsc("tags",e)||Oe("Unknown tag: {{"+e+"}} "),u=o.template),r!==void 0?(R+=r,i=r=[{props:{},args:[]}]):G&&(i=G(n.data,n,j)),a=i.length,h=0;h<a;h++)b=i[h],(!W||!W.tag||h&&!W.tag._.inline||f._er)&&((y=$.tmpls&&b.tmpl)&&(y=b.content=$.tmpls[y-1]),b.index=h,b.tmpl=y,b.render=Pn,b.view=n,b.ctx=Xe(b.ctx,Q)),(t=b.props.tmpl)&&(b.tmpl=n.getTmpl(t)),f||(f=new o._ctr,k=!!f.init,f.parent=c=Q&&Q.tag,f.tagCtxs=i,B=f.dataMap,W&&(f._.inline=!1,W.tag=f,f.linkCtx=W),(f._.bnd=G||W.fn)?f._.arrVws={}:f.dataBoundOnly&&Oe("{^{"+e+"}} tag must be data-bound")),i=f.tagCtxs,B=f.dataMap,b.tag=f,B&&i&&(b.map=i[h].map),f.flow||(C=b.ctx=b.ctx||{},g=f.parents=C.parentTags=Q&&Xe(C.parentTags,Q.parentTags)||{},c&&(g[c.tagName]=c),g[f.tagName]=C.tag=f);if(!(f._er=r)){for(Jn(f,i[0]),f.rendering={},h=0;h<a;h++)b=f.tagCtx=i[h],L=b.props,w=f.cvtArgs(),(p=L.dataMap||B)&&(w.length||L.dataMap)&&(v=b.map,(!v||v.src!==w[0]||s)&&(v&&v.src&&v.unmap(),v=b.map=p.map(w[0],L,void 0,!f._.bnd)),w=[v.tgt]),f.ctx=b.ctx,h||(k&&(X=f.template,f.init(b,W,f.ctx),k=void 0),W&&(W.attr=f.attr=W.attr||f.attr),m=f.attr,f._.noVws=m&&m!==ke),_=void 0,f.render&&(_=f.render.apply(f,w),n.linked&&_&&f.linkedElem&&!Qi.test(_)&&(_=Bt(d.templates(_),w[0],void 0,void 0,n,void 0,void 0,f))),w.length||(w=[n]),_===void 0&&(S=w[0],f.contentCtx&&(S=f.contentCtx(S)),_=b.render(S,!0)||(s?void 0:"")),R=R?R+(_||""):_;f.rendering=void 0}return f.tagCtx=i[0],f.ctx=f.tagCtx.ctx,f._.noVws&&f._.inline&&(R=m==="text"?ye.html(R):""),G&&n._.onRender?n._.onRender(R,n,f):R}function tn(e,n,t,i,s,r,f,l){var o,u,g,m,c=this,h=n==="array";c.content=l,c.views=h?[]:{},c.parent=t,c.type=n||"top",c.data=i,c.tmpl=s,m=c._={key:0,useKey:h?0:1,id:""+Wi++,onRender:f,bnds:{}},c.linked=!!f,t?(o=t.views,u=t._,u.useKey?(o[m.key="_"+u.useKey++]=c,c.index=It,c.getIndex=Tt):o.length===(m.key=c.index=r)?o.push(c):o.splice(r,0,c),c.ctx=e||t.ctx):c.ctx=e}tn.prototype={get:Ki,getIndex:jt,getRsc:Yi,getTmpl:Gi,hlp:zi,_is:"view"};function $i(e){var n,t,i;for(n in Un)t=n+"s",e[t]&&(i=e[t],e[t]={},I[t](i,e))}function es(e,n,t){var i,s,r,f=new j._tg;function l(){var o=this;o._={inline:!0,unlinked:!0},o.tagName=e}if(D(n)?n={depends:n.depends,render:n}:""+n===n&&(n={template:n}),s=n.baseTag){n.flow=!!n.flow,n.baseTag=s=""+s===s?t&&t.tags[s]||Fe[s]:s,f=fe(f,s);for(r in n)f[r]=At(s[r],n[r])}else f=fe(f,n);return(i=f.template)!==void 0&&(f.template=""+i===i?pe[i]||pe(i):i),f.init!==!1&&((l.prototype=f).constructor=f._ctr=l),t&&(f._parentTmpl=t),f}function ns(e){return this.base.apply(this,e)}function St(e,n,t,i){function s(o){var u,g;if(""+o===o||o.nodeType>0&&(r=o)){if(!r){if(/^\.\/[^\\:*?"<>]*$/.test(o))(g=pe[e=e||o])?o=g:r=document.getElementById(o);else if(d.fn&&!j.rTmpl.test(o))try{r=d(document).find(o)[0]}catch{}}r&&(i?o=r.innerHTML:(u=r.getAttribute(Mn),u?u!==Ne?(o=pe[u],delete pe[u]):d.fn&&(o=d.data(r)[Ne]):(e=e||(d.fn?Ne:o),o=St(e,r.innerHTML,t,i)),o.tmplName=e=e||u,e!==Ne&&(pe[e]=o),r.setAttribute(Mn,e),d.fn&&d.data(r,Ne,o))),r=void 0}else o.fn||(o=void 0);return o}var r,f,l=n=n||"";if(i===0&&(i=void 0,l=s(l)),i=i||(n.markup?n:{}),i.tmplName=e,t&&(i._parentTmpl=t),!l&&n.markup&&(l=s(n.markup))&&l.fn&&(l=l.markup),l!==void 0)return l.fn||n.fn?l.fn&&(f=l):(n=Lt(l,i),Wn(l.replace(xt,"\\$&"),n)),f||(f=fe(function(){return f.render.apply(f,arguments)},n),$i(f)),e&&!t&&e!==Ne&&(Ct[e]=f),f}function ts(e,n){return d.isFunction(e)?e.call(n):e}function Rt(e){var n,t=[],i=e.length;for(n=0;n<i;n++)t.push(e[n].unmap());return t}function is(e,n){var t,i,s=this,r=n.getters,f=n.extend,l=n.id,o=d.extend({_is:e||"unnamed",unmap:k,merge:y},f),u="",g="",m=r?r.length:0,c=d.observable,h={};function a(p){i.apply(this,p)}function _(){return new a(arguments)}function b(p,v){var w,L,X,B,S,R=r.length;for(w=0;w<R;w++)B=r[w],L=void 0,B+""!==B&&(L=B,B=L.getter),(S=p[B])===void 0&&L&&(X=L.defaultVal)!==void 0&&(S=ts(X,p)),v(S,L&&s[L.type],B)}function C(p){p=p+""===p?JSON.parse(p):p;var v,w,L,X,B,S=p,R=[];if(V(p)){for(p=p||[],L=p.length,v=0;v<L;v++)R.push(this.map(p[v]));return R._is=e,R.unmap=k,R.merge=y,R}if(p){b(p,function(W,Q){Q&&(W=Q.map(W)),R.push(W)}),S=this.apply(this,R);for(B in p)B!==ne&&!h[B]&&(S[B]=p[B])}return S}function y(p){p=p+""===p?JSON.parse(p):p;var v,w,L,X,B,S,R,W,Q,$,G=this;if(V(G)){for(W={},$=[],L=p.length,X=G.length,v=0;v<L;v++){for(Q=p[v],R=!1,w=0;w<X&&!R;w++)W[w]||(S=G[w],l&&(W[w]=R=l+""===l?Q[l]&&(h[l]?S[l]():S[l])===Q[l]:l(S,Q)));R?(S.merge(Q),$.push(S)):$.push(_.map(Q))}c?c(G).refresh($,!0):G.splice.apply(G,[0,G.length].concat($));return}b(p,function(ge,Y,q){Y?G[q]().merge(ge):G[q](ge)});for(B in p)B!==ne&&!h[B]&&(G[B]=p[B])}function k(){var p,v,w,L,X,B,S,R=this;if(V(R))return Rt(R);for(p={},L=r.length,w=0;w<L;w++)v=r[w],X=void 0,v+""!==v&&(X=v,v=X.getter),S=R[v](),p[v]=X&&S&&s[X.type]?V(S)?Rt(S):S.unmap():S;for(v in R)v!=="_is"&&!h[v]&&v!==ne&&(v.charAt(0)!=="_"||!h[v.slice(1)])&&!d.isFunction(R[v])&&(p[v]=R[v]);return p}for(a.prototype=o,t=0;t<m;t++)(function(p){p=p.getter||p,h[p]=t+1;var v="_"+p;u+=(u?",":"")+p,g+="this."+v+" = "+p+`;
`,o[p]=o[p]||function(w){if(!arguments.length)return this[v];c?c(this).setProperty(p,w):this[v]=w},c&&(o[p].set=o[p].set||function(w){this[v]=w})})(r[t]);return i=new Function(u,g.slice(0,-1)),i.prototype=o,o.constructor=i,_.map=C,_.getters=r,_.extend=f,_.id=l,_}function Lt(e,n){var t,i=Se._wm||{},s=fe({tmpls:[],links:{},bnds:[],_is:"template",render:Pn},n);return s.markup=e,n.htmlTag||(t=On.exec(e),s.htmlTag=t?t[1].toLowerCase():""),t=i[s.htmlTag],t&&t!==i.div&&(s.markup=d.trim(s.markup)),s}function ss(e,n){function t(s,r,f){var l,o,u,g;if(s&&typeof s===Be&&!s.nodeType&&!s.markup&&!s.getTgt&&!(e==="viewModel"&&s.getters||s.extend)){for(u in s)t(u,s[u],r);return r||I}return r===void 0&&(r=s,s=void 0),s&&""+s!==s&&(f=r,r=s,s=void 0),g=f?e==="viewModel"?f:f[i]=f[i]||{}:t,o=n.compile,r===null?s&&delete g[s]:(r=o?o.call(g,s,r,f,0):r,s&&(g[s]=r)),o&&r&&(r._is=e),r&&(l=j.onStore[e])&&l(s,r,o),r}var i=e+"s";I[i]=t}function Ft(e){Ie[e]=function(n){return arguments.length?(ce[e]=n,Ie):ce[e]}}function Ht(e){function n(t,i){this.tgt=e.getTgt(t,i)}return D(e)&&(e={getTgt:e}),e.baseMap&&(e=fe(fe({},e.baseMap),e)),e.map=function(t,i){return new n(t,i)},e}function Pn(e,n,t,i,s,r){var f,l,o,u,g,m,c,h,a=i,_="";if(n===!0?(t=n,n=void 0):typeof n!==Be&&(n=void 0),(o=this.tag)?(g=this,a=a||g.view,u=a.getTmpl(o.template||g.tmpl),arguments.length||(e=a)):u=this,u){if(!i&&e&&e._is==="view"&&(a=e),a&&e===a&&(e=a.data),m=!a,En=En||m,a||((n=n||{}).root=e),!En||Se.useViews||u.useViews||a&&a!==A)_=Bt(u,e,n,t,a,s,r,o);else{if(a?(c=a.data,h=a.index,a.index=It):(a=A,a.data=e,a.ctx=n),V(e)&&!t)for(f=0,l=e.length;f<l;f++)a.index=f,a.data=e[f],_+=u.fn(e[f],a,j);else a.data=e,_+=u.fn(e,a,j);a.data=c,a.index=h}m&&(En=void 0)}return _}function Bt(e,n,t,i,s,r,f,l){function o(w){k=fe({},t),k[y]=w}var u,g,m,c,h,a,_,b,C,y,k,p,v="";if(l&&(C=l.tagName,p=l.tagCtx,t=t?Xe(t,l.ctx):l.ctx,e===s.content?_=e!==s.ctx._wrp?s.ctx._wrp:void 0:e!==p.content?e===l.template?(_=p.tmpl,t._wrp=p.content):_=p.content||s.content:_=s.content,p.props.link===!1&&(t=t||{},t.link=!1),(y=p.props.itemVar)&&(y.charAt(0)!=="~"&&be("Use itemVar='~myItem'"),y=y.slice(1))),s&&(f=f||s._.onRender,t=Xe(t,s.ctx)),r===!0&&(a=!0,r=0),f&&(t&&t.link===!1||l&&l._.noVws)&&(f=void 0),b=f,f===!0&&(b=void 0,f=s._.onRender),t=e.helpers?Xe(e.helpers,t):t,k=t,V(n)&&!i)for(m=a?s:r!==void 0&&s||new tn(t,"array",s,n,e,r,f,_),s&&s._.useKey&&(m._.bnd=!l||l._.bnd&&l),y&&(m.it=y),y=m.it,u=0,g=n.length;u<g;u++)y&&o(n[u]),c=new tn(k,"item",m,n[u],e,(r||0)+u,f,m.content),h=e.fn(n[u],c,j),v+=m._.onRender?m._.onRender(h,c):h;else y&&o(n),m=a?s:new tn(k,C||"data",s,n,e,r,f,_),l&&!l.flow&&(m.tag=l,l.view=m),v+=e.fn(n,m,j);return b?b(v,m):v}function Ot(e,n,t){var i=t!==void 0?D(t)?t.call(n.data,e,n):t||"":"{Error: "+e.message+"}";return ce.onError&&(t=ce.onError.call(n.data,e,t&&i,n))!==void 0&&(i=t),n&&!n.linkCtx?ye.html(i):i}function Oe(e){throw new j.Err(e)}function be(e){Oe(`Syntax error
`+e)}function Wn(e,n,t,i,s){function r(k){k-=_,k&&C.push(e.substr(_,k).replace(Bn,"\\n"))}function f(k,p){k&&(k+="}}",be((p?"{{"+p+"}} block has {{/"+k+" without {{"+k:"Unmatched or missing {{/"+k)+`, in template:
`+e))}function l(k,p,v,w,L,X,B,S,R,W,Q,$){(B&&p||R&&!v||S&&S.slice(-1)===":"||W)&&be(k),X&&(L=":",w=ke),R=R||t&&!s;var G=(p||t)&&[[]],ge="",Y="",q="",M="",Z="",O="",ue="",P="",oe=!R&&!L;v=v||(S=S||"#data",L),r($),_=$+k.length,B?h&&C.push(["*",`
`+S.replace(/^:/,"ret+= ").replace(yt,"$1")+`;
`]):v?(v==="else"&&(Ui.test(S)&&be('for "{{else if expr}}" use "{{else expr}}"'),G=y[7]&&[[]],y[8]=e.substring(y[8],$),y=b.pop(),C=y[2],oe=!0),S&&Jt(S.replace(Bn," "),G,n).replace(Mi,function(ae,K,ee,N,se,_e,de,ve){return N="'"+se+"':",de?(Y+=_e+",",M+="'"+ve+"',"):ee?(q+=N+"j._cp("+_e+',"'+ve+'",view),',O+=N+"'"+ve+"',"):K?ue+=_e:(se==="trigger"&&(P+=_e),ge+=N+_e+",",Z+=N+"'"+ve+"',",m=m||wt.test(se)),""}).slice(0,-1),G&&G[0]&&G.pop(),g=[v,w||!!i||m||"",oe&&[],Mt(M||(v===":"?"'#data',":""),Z,O),Mt(Y||(v===":"?"data,":""),ge,q),ue,P,G||0],C.push(g),oe&&(b.push(y),y=g,y[8]=_)):Q&&(f(Q!==y[0]&&y[0]!=="else"&&Q,y[0]),y[8]=e.substring(y[8],$),y=b.pop()),f(!y&&Q),C=y[2]}var o,u,g,m,c,h=ce.allowCode||n&&n.allowCode||Ie.allowCode===!0,a=[],_=0,b=[],C=a,y=[,,a];if(h&&n._is&&(n.allowCode=h),t&&(i!==void 0&&(e=e.slice(0,-i.length-2)+Ce),e=en+e+nn),f(b[0]&&b[0][2].pop()[0]),e.replace(F,l),r(e.length),(_=a[a.length-1])&&f(""+_!==_&&+_[8]===_[8]&&_[0]),t){for(u=qn(a,e,t),c=[],o=a.length;o--;)c.unshift(a[o][7]);Vn(u,c)}else u=qn(a,n);return u}function Vn(e,n){var t,i,s=0,r=n.length;for(e.deps=[],e.paths=[];s<r;s++){e.paths.push(i=n[s]);for(t in i)t!=="_jsvto"&&i.hasOwnProperty(t)&&i[t].length&&!i[t].skp&&(e.deps=e.deps.concat(i[t]))}}function Mt(e,n,t){return[e.slice(0,-1),n.slice(0,-1),t.slice(0,-1)]}function Ut(e,n){return`
	`+(n?n+":{":"")+"args:["+e[0]+"]"+(e[1]||!n?`,
	props:{`+e[1]+"}":"")+(e[2]?`,
	ctx:{`+e[2]+"}":"")}function Jt(e,n,t){function i(y,k,p,v,w,L,X,B,S,R,W,Q,$,G,ge,Y,q,M,Z,O){function ue(se,_e,de,ve,Ge,Pe,Ue,We){var xe=de===".";if(de&&(w=w.slice(_e.length),/^\.?constructor$/.test(We||w)&&be(se),xe||(se=(ve?'view.hlp("'+ve+'")':Ge?"view":"data")+(We?(Pe?"."+Pe:ve||Ge?"":"."+de)+(Ue||""):(We=ve?"":Ge?Pe||"":de,"")),se=se+(We?"."+We:""),se=_e+(se.slice(0,9)==="view.data"?se.slice(5):se)),u)){if(ae=s==="linkTo"?r=n._jsvto=n._jsvto||[]:g.bd,K=xe&&ae[ae.length-1]){if(K._jsv){for(;K.sb;)K=K.sb;K.bnd&&(w="^"+w.slice(1)),K.sb=w,K.bnd=K.bnd||w.charAt(0)==="^"}}else ae.push(w);b[a]=Z+(xe?1:0)}return se}v&&!B&&(w=v+w),L=L||"",p=p||k||Q,w=w||S,R=R||q||"";var P,oe,ae,K,ee,N=")";if(R==="["&&(R="[j._sq(",N=")]"),X&&!o&&!l)be(e);else{if(u&&Y&&!o&&!l&&(!s||f||r)&&(P=b[a-1],O.length-1>Z-(P||0))){if(P=O.slice(P,Z+y.length),oe!==!0)if(ae=r||m[a-1].bd,K=ae[ae.length-1],K&&K.prm){for(;K.sb&&K.sb.prm;)K=K.sb;ee=K.sb={path:K.sb,bnd:K.bnd}}else ae.push(ee={path:ae.pop()});Y=De+":"+P+" onerror=''"+Ce,oe=h[Y],oe||(h[Y]=!0,h[Y]=oe=Wn(Y,t,!0)),oe!==!0&&ee&&(ee._jsv=oe,ee.prm=g.bd,ee.bnd=ee.bnd||ee.path&&ee.path.indexOf("^")>=0)}return o?(o=!$,o?y:Q+'"'):l?(l=!G,l?y:Q+'"'):(p?(b[a]=Z++,g=m[++a]={bd:[]},p):"")+(M?a?"":(c=O.slice(c,Z),(s?(s=f=r=!1,"\b"):"\b,")+c+(c=Z+y.length,u&&n.push(g.bd=[]),"\b")):B?(a&&be(e),u&&n.pop(),s=w,f=v,c=Z+y.length,u&&(u=g.bd=n[s]=[],u.skp=!v),w+":"):w?w.split("^").join(".").replace(Bi,ue)+(R?(g=m[++a]={bd:[]},_[a]=N,R):L):L||(ge?(ge=_[a]||ge,_[a]=!1,g=m[--a],ge+(R?(g=m[++a],_[a]=N,R):"")):W?(_[a]||be(e),","):k?"":(o=$,l=G,'"')))}}var s,r,f,l,o,u=n&&n[0],g={bd:u},m={0:g},c=0,h=(t?t.links:u&&(u.links=u.links||{}))||A.tmpl.links,a=0,_={},b={},C=(e+(t?" ":"")).replace(Oi,i);return!a&&C||be(e)}function qn(e,n,t){var i,s,r,f,l,o,u,g,m,c,h,a,_,b,C,y,k,p,v,w,L,X,B,S,R,W,Q,$,G,ge,Y=0,q=Se.useViews||n.useViews||n.tags||n.templates||n.helpers||n.converters,M="",Z={},O=e.length;for(""+n===n?(p=t?'data-link="'+n.replace(Bn," ").slice(1,-1)+'"':n,n=0):(p=n.tmplName||"unnamed",n.allowCode&&(Z.allowCode=!0),n.debug&&(Z.debug=!0),h=n.bnds,k=n.tmpls),i=0;i<O;i++)if(s=e[i],""+s===s)M+=`
+"`+s+'"';else if(r=s[0],r==="*")M+=`;
`+s[1]+`
ret=ret`;else{if(f=s[1],L=!t&&s[2],l=Ut(s[3],"params")+"},"+Ut(_=s[4]),$=s[5],ge=s[6],X=s[8]&&s[8].replace(yt,"$1"),(R=r==="else")?a&&a.push(s[7]):(Y=0,h&&(a=s[7])&&(a=[a],Y=h.push(1))),q=q||_[1]||_[2]||a||/view.(?!index)/.test(_[0]),(W=r===":")?f&&(r=f===ke?">":f+r):(L&&(v=Lt(X,Z),v.tmplName=p+"/"+r,v.useViews=v.useViews||q,qn(L,v),q=v.useViews,k.push(v)),R||(w=r,q=q||r&&(!Fe[r]||!Fe[r].flow),S=M,M=""),B=e[i+1],B=B&&B[0]==="else"),G=$?`;
try{
ret+=`:`
+`,b="",C="",W&&(a||ge||f&&f!==ke)){if(Q=new Function("data,view,j,u"," // "+p+" "+Y+" "+r+`
return {`+l+"};"),Q._er=$,Q._tag=r,t)return Q;Vn(Q,a),y='c("'+f+'",view,',c=!0,b=y+Y+",",C=")"}if(M+=W?(t?($?`try{
`:"")+"return ":G)+(c?(c=void 0,q=m=!0,y+(a?(h[Y-1]=Q,Y):"{"+l+"}")+")"):r===">"?(u=!0,"h("+_[0]+")"):(g=!0,"((v="+_[0]+")!=null?v:"+(t?"null)":'"")'))):(o=!0,`
{view:view,tmpl:`+(L?k.length:"0")+","+l+"},"),w&&!B){if(M="["+M.slice(0,-1)+"]",y='t("'+w+'",view,this,',t||a){if(M=new Function("data,view,j,u"," // "+p+" "+Y+" "+w+`
return `+M+";"),M._er=$,M._tag=w,a&&Vn(h[Y-1]=M,a),t)return M;b=y+Y+",undefined,",C=")"}M=S+G+y+(Y||M)+")",a=0,w=0}$&&(q=!0,M+=`;
}catch(e){ret`+(t?"urn ":"+=")+b+"j._err(e,view,"+$+")"+C+";}"+(t?"":"ret=ret"))}M="// "+p+`
var v`+(o?",t=j._tag":"")+(m?",c=j._cnvt":"")+(u?",h=j._html":"")+(t?`;
`:`,ret=""
`)+(Z.debug?"debugger;":"")+M+(t?`
`:`;
return ret;`),ce.debugMode!==!1&&(M=`try {
`+M+`
}catch(e){
return j._err(e, view);
}`);try{M=new Function("data,view,j,u",M)}catch(ue){be(`Compiled template code:

`+M+`
: "`+ue.message+'"')}return n&&(n.fn=M,n.useViews=!!q),M}function Xe(e,n){return e&&e!==n?n?fe(fe({},n),e):e:n&&fe({},n)}function rs(e){return Et[e]||(Et[e]="&#"+e.charCodeAt(0)+";")}function fs(e){var n,t,i=[];if(typeof e===Be)for(n in e)t=e[n],n!==ne&&e.hasOwnProperty(n)&&!D(t)&&i.push({key:n,prop:t});return i}function Dt(e,n,t){var i=this.jquery&&(this[0]||Oe("Unknown template")),s=i.getAttribute(Mn);return Pn.call(s?d.data(i)[Ne]:pe(i),e,n,t)}function Kn(e){return e!=null?Di.test(e)&&(""+e).replace(Pi,rs)||e:""}if(j=I.sub,Ie=I.settings,!(In||d&&d.render)){for(x in Un)ss(x,Un[x]);ye=I.converters,un=I.helpers,Fe=I.tags,j._tg.prototype={baseApply:ns,cvtArgs:Xi},A=j.topView=new tn,d?(d.fn.render=Dt,ne=d.expando,d.observable&&(fe(j,d.views.sub),I.map=d.views.map)):(d={},ie&&(E.jsrender=d),d.renderFile=d.__express=d.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},d.isFunction=function(e){return typeof e=="function"},d.isArray=Array.isArray||function(e){return{}.toString.call(e)==="[object Array]"},j._jq=function(e){e!==d&&(fe(e,d),d=e,d.fn.render=Dt,delete d.jsrender,ne=d.expando)},d.jsrender=U),ce=j.settings,ce.allowCode=!1,D=d.isFunction,d.render=Ct,d.views=I,d.templates=pe=I.templates;for(vt in ce)Ft(vt);(Ie.debugMode=function(e){return e===void 0?ce.debugMode:(ce.debugMode=e,ce.onError=e+""===e?new Function("","return '"+e+"';"):D(e)?e:void 0,Ie)})(!1),Se=ce.advanced={useViews:!1,_jsv:!1},Fe({if:{render:function(e){var n=this,t=n.tagCtx,i=n.rendering.done||!e&&(arguments.length||!t.index)?"":(n.rendering.done=!0,n.selected=t.index,t.render(t.view,!0));return i},flow:!0},for:{render:function(e){var n=!arguments.length,t,i=this,s=i.tagCtx,r="",f=0;return i.rendering.done||(t=n?s.view.data:e,t!==void 0&&(r+=s.render(t,n),f+=V(t)?t.length:1),(i.rendering.done=f)&&(i.selected=s.index)),r},flow:!0},props:{baseTag:"for",dataMap:Ht(fs),flow:!0},include:{flow:!0},"*":{render:Cn,flow:!0},":*":{render:Cn,flow:!0},dbg:un.dbg=ye.dbg=qi}),ye({html:Kn,attr:Kn,url:function(e){return e!=null?encodeURI(""+e):e===null?e:""}})}if(ce=j.settings,V=(d||In).isArray,Ie.delimiters("{{","}}","^"),Vi&&In.views.sub._jq(d),I=d.views,j=I.sub,D=d.isFunction,V=d.isArray,ne=d.expando,!d.observe){var Qt=d.event.special,Pt=[].slice,zn=[].splice,Wt=[].concat,sn=parseInt,ls=/\S+/g,qe=j.propChng=j.propChng||"propertyChange",Ke=j.arrChng=j.arrChng||"arrayChange",ze={},os=qe+".observe",as=1,ds=1,us=1,Gn=d.hasData,Ye=d.data,Vt={},Nn=function(e){return e._cId=e._cId||".obs"+ds++},Xn=function(e,n){return this._data=n,this._ns=e,this},Yn=function(e,n){return this._data=n,this._ns=e,this},cs=function(e){return V(e)?[e]:e},qt=function(e,n,t){e=e?V(e)?e:[e]:[];var i,s,r=n,f=r,l=e&&e.length,o=[];for(i=0;i<l;i++){if(s=e[i],D(s)){o=o.concat(qt(s.call(n,n,t),n));continue}else if(""+s!==s){n=f=s,f!==r&&o.push(r=f);continue}f!==r&&o.push(r=f),o.push(s)}return o},Kt=function(e,n){for(var t in e)return;delete ze[n]},zt=function(e,n){function t(a){return typeof a===Be&&(c[0]||m&&V(a))}if(!(e.data&&e.data.off)){var i,s,r,f=n.oldValue,l=n.value,o=e.data,u=o.observeAll,g=o.cb,m=!g.noArray,c=o.paths,h=o.ns;e.type===Ke?(g.array||g).call(o,e,n):(o.prop===n.path||o.prop==="*")&&(u?(i=u._path+"."+n.path,s=u.filter,r=[e.target].concat(u.parents()),t(f)&&hn(m,h,[f],c,g,!0,s,[r],i),t(l)&&hn(m,h,[l],c,g,void 0,s,[r],i)):(t(f)&&hn(m,h,[f],c,g,!0),t(l)&&hn(m,h,[l],c,g)),o.cb(e,n))}},hn=function(){var e=Wt.apply([],arguments);return J.apply(e.shift(),e)},Zn=function(e,n,t){Nt(this._ns,this._data,e,n,[],"root",t)},Gt=function(e,n){Zn.call(this,e,n,!0)},Nt=function(e,n,t,i,s,r,f,l){function o(y,k){for(m=y.length,h=r+"[]";m--;)u(y,m,k,1)}function u(y,k,p,v){var w,L;k!==ne&&(w=H._fltr(h,y[k],a,i))&&(L=a.slice(),v&&_&&L[0]!==_&&L.unshift(_),Nt(e,w,t,i||(v?void 0:0),L,h,p,l))}function g(y,k){switch(r=y.data.observeAll._path,_=y.target,k.change){case"insert":o(k.items);break;case"remove":o(k.items,!0);break;case"set":h=r+"."+k.path,u(k,"oldValue",!0),u(k,"value")}_=void 0,t.apply(this,arguments)}var m,c,h,a,_,b,C=!l||l.un||!f;if(n&&typeof n===Be){if(a=[n].concat(s),c=V(n)?"":"*",l&&C&&Gn(n)&&l[b=Ye(n).obId]){l[b]++;return}if(l||(l={un:f}),t){if(c||i!==0)if(g._cId=Nn(t),C)J(e,n,c,g,f,i,a,r),b=Ye(n).obId,l[b]=(l[b]||0)+1;else{if(--l[Ye(n).obId])return;J(e,n,c,g,f,i,a,r)}}else l&&(l[Ye(n).obId]=1),J(e,n,c,void 0,f,i,a,r);if(c)for(m in n)h=r+"."+m,u(n,m,f);else o(n,f)}},Xt=function(e){return e.indexOf(".")<0&&e.indexOf("[")<0},hs=function(){return[].push.call(arguments,!0),J.apply(this,arguments)};J=function(){function e(){function r(P,oe,ae,K){var ee,N,se=Gn(O),_e=cs(O),de=W,ve=Q;if(P=n?P+"."+n:P,!_&&(K||ae)){for(v=se&&d._data(O),v=v&&v.events,v=v&&v[ae?Ke:qe],k=v&&v.length;k--;)if(p=v[k]&&v[k].data,p&&(K&&p.ns!==n||!K&&p.ns===n&&p.cb&&p.cb._cId===b._cId))return}_||K?d(_e).off(P,zt):(N=ae?{}:{fullPath:h,paths:oe?[oe]:[],prop:c},N.ns=n,N.cb=b,Q&&(N.observeAll={_path:ve,path:function(){return ee=de.length,ve.replace(/[[.]/g,function(Ge){return ee--,Ge==="["?"["+d.inArray(de[ee-1],de[ee]):"."})},parents:function(){return de},filter:$}),d(_e).on(P,null,N,zt),B&&(B[Ye(O).obId||Ye(O,"obId",as++)]=O))}function f(P){var oe=Z;return P.ob=w(P,oe),P.cb=function(ae,K){var ee=P.ob,N=P.sb,se=w(P,oe);se!==ee&&(typeof ee===Be&&(l(ee,!0),(N||t&&V(ee))&&e([ee],N,b,w,!0)),P.ob=se,typeof se===Be&&(l(se),(N||t&&V(se))&&e([se],N,b,w))),b(ae,K)}}function l(P,oe,ae,K){if(t){var ee=O,N=Q;O=P,K&&(O=P[K],Q+="."+K),$&&O&&(O=H._fltr(Q,O,K?[P].concat(W):W,$)),O&&(ae||V(O))&&r(Ke+".observe"+(b?Nn(b):""),void 0,!0,oe),O=ee,Q=N}}var o,u,g,m,c,h,a,_,b,C,y,k,p,v,w,L,X,B,S,R,W,Q,$,G,ge,Y=os,q=this!=1?Wt.apply([],arguments):Pt.call(arguments),M=q.pop()||!1,Z=q.shift(),O=Z,ue=q.length;if(M+""===M&&(Q=M,W=q.pop(),$=q.pop(),M=!!q.pop(),ue-=3),M===!!M&&(_=M,M=q[ue-1],M=ue&&M+""!==M&&(!M||D(M))?(ue--,q.pop()):void 0,_&&!ue&&D(Z)&&(M=Z,Z=void 0)),b=M,ue&&D(q[ue-1])&&(L=w=b,b=q.pop(),ue--),!(_&&b&&!b._cId)){for(Y+=b?(y=b._inId||"",_?b._cId+y:(C=Nn(b))+y):"",C&&!_&&(B=ze[C]=ze[C]||{}),G=n&&n.match(ls)||[""],ge=G.length;ge--;){if(n=G[ge],Z&&(h=q[0],!h||h+""!==h)&&(V(Z)?l(Z,_,!0):_&&r(Y,"")),_&&!ue&&!Z)for(u in ze){u=ze[u];for(p in u)O=u[p],V(O)?l(O,_,_):r(Y,"")}for(S=0,o=0;o<ue;o++)if(h=q[o],h!==""){if(h&&h._cp&&(w=j._gccb(h[0]),s=Z=h[0].data,h=h[1]),O=Z,""+h===h){if(m=h.split("^"),m[1]&&(S=m[0].split(".").length,h=m.join("."),S=h.split(".").length-S),w&&(X=w(h,Z,S),w=L),X){ue+=X.length-1,zn.apply(q,[o--,1].concat(X));continue}m=h.split(".")}else D(h)||(h&&h._jsv?(R=_?h.cb:f(h),R.noArray=!t,R._cId=b._cId,R._inId=R._inId||".obIn"+us++,(h.bnd||h.prm&&h.prm.length||!h.sb)&&e([O],h.path,[s],h.prm,R,w,_),h.sb&&e([h.ob],h.sb,b,w,_),h=s,O=void 0):O=h),m=[Z=h];for(;O&&(c=m.shift())!==void 0;)if(typeof O===Be){if(""+c===c){if(c==="")continue;if(m.length<S+1&&!O.nodeType){if(!_&&(v=Gn(O)&&d._data(O))){for(v=v.events,v=v&&v[qe],k=v&&v.length,g=0;k--;)p=v[k].data,p&&p.ns===n&&p.cb._cId===b._cId&&p.cb._inId===b._inId&&(p.prop===c||p.prop==="*"||p.prop==="**")&&((u=m.join("."))&&p.paths.push(u),g++);if(g){O=O[c];continue}}if(c==="*"||c==="**"){if(!_&&v&&v.length&&r(Y,"",!1,!0),c==="*"){r(Y,"");for(u in O)u!==ne&&l(O,_,void 0,u)}else d.observable(n,O)[(_?"un":"")+"observeAll"](b);break}else c&&r(Y+".p_"+c,m.join("^"))}Q&&(Q+="."+c),c=O[c]}if(D(c)){(a=c.depends)&&e([O],qt(a,O,b),b,w,_);break}O=c,_&&O===Z&&(o>ue-2||q[o+1]+""!==q[o+1])&&r(Y,"")}l(O,_)}}return C&&Kt(B,C),{cbId:C,bnd:B}}}var n,t=this!=!1,i=Pt.call(arguments),s=i[0];return s+""===s&&t&&(n=s,i.shift(),s=i[0]),e.apply(1,i)},H=function(e,n){return arguments.length===1&&(n=e,e=""),V(n)?new Yn(e,n):new Xn(e,n)},j.getDeps=function(){var e=arguments;return function(){for(var n,t,i=[],s=e.length;s--;)n=e[s--],t=e[s],t&&(i=i.concat(D(t)?t(n,n):t));return i}},d.observable=H,H._fltr=function(e,n,t,i){if(i&&D(i)?i(e,n,t):!0)return n=D(n)?n.set&&n.call(t[0]):n,typeof n===Be&&n},H.Object=Xn,H.Array=Yn,d.observe=H.observe=J,d.unobserve=H.unobserve=hs,H._apply=hn,Xn.prototype={_data:null,observeAll:Zn,unobserveAll:Gt,data:function(){return this._data},setProperty:function(e,n,t){e=e||"";var i,s,r,f=e+""!==e,l=this,o=l._data;if(o){if(f)if(t=n,V(e))for(i=e.length;i--;)s=e[i],l.setProperty(s.name,s.value,t===void 0||t);else for(i in e)l.setProperty(i,e[i],t);else if(e!==ne){for(r=e.split(/[.^]/);o&&r.length>1;)o=o[r.shift()];o&&l._setProperty(o,r[0],n,t)}}return l},removeProperty:function(e){return this.setProperty(e,Vt),this},_setProperty:function(e,n,t,i){var s,r,f,l=n?e[n]:e;D(l)&&l.set&&(e=e._wrp||e,r=l,s=r.set===!0?r:r.set,l=r.call(e)),(l!==t||i&&l!=t)&&(!(l instanceof Date)||l>t||l<t)&&(s?(s.call(e,t),t=r.call(e)):(f=t===Vt)?l!==void 0?(delete e[n],t=void 0):n=void 0:n&&(e[n]=t),n&&this._trigger(e,{change:"set",path:n,value:t,oldValue:l,remove:f}))},_trigger:function(e,n){d(e).triggerHandler(qe+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),n)}},Yn.prototype={_data:null,observeAll:Zn,unobserveAll:Gt,data:function(){return this._data},insert:function(e,n){var t=this._data;return arguments.length===1&&(n=e,e=t.length),e=sn(e),e>-1&&(n=V(n)?n:[n],n.length&&this._insert(e,n)),this},_insert:function(e,n){var t=this._data,i=t.length;e>i&&(e=i),zn.apply(t,[e,0].concat(n)),this._trigger({change:"insert",index:e,items:n},i)},remove:function(e,n){var t,i=this._data;return e===void 0&&(e=i.length-1),e=sn(e),n=n?sn(n):n===0?0:1,n>0&&e>-1&&(t=i.slice(e,e+n),(n=t.length)&&this._remove(e,n,t)),this},_remove:function(e,n,t){var i=this._data,s=i.length;i.splice(e,n),this._trigger({change:"remove",index:e,items:t},s)},move:function(e,n,t){return t=t?sn(t):t===0?0:1,e=sn(e),n=sn(n),t>0&&e>-1&&n>-1&&e!==n&&this._move(e,n,t),this},_move:function(e,n,t){var i,s=this._data,r=s.length,f=e+t-r;f>0&&(t-=f),t&&(i=s.splice(e,t),n>s.length&&(n=s.length),zn.apply(s,[n,0].concat(i)),this._trigger({change:"move",oldIndex:e,index:n,items:i},r))},refresh:function(e,n){function t(){r&&(o.insert(s-r,u),h+=r,i+=r,r=0,u=[])}var i,s,r,f,l,o=this,u=[],g=o._data,m=g.slice(),c=g.length,h=c,a=e.length;for(o._srt=!0,s=r=0;s<a;s++)if((f=e[s])===g[s-r])t();else{for(i=s-r;i<h&&f!==g[i];i++);if(i<h){for(t(),l=0;l++<a-i&&e[s+l]===g[i+l];);o.move(i,s,l),s+=l-1}else r++,u.push(f)}return t(),h>s&&o.remove(s,h-s),o._srt=void 0,o._trigger({change:"refresh",oldItems:m},c),o},_trigger:function(e,n){var t=this,i=t._data,s=i.length,r=d([i]);t._srt?e.refresh=!0:s!==n&&r.triggerHandler(qe,{change:"set",path:"length",value:s,oldValue:n}),r.triggerHandler(Ke+(t._ns?"."+/^\S+/.exec(t._ns)[0]:""),e)}},Qt[qe]=Qt[Ke]={remove:function(e){var n,t,i,s,r,f=e.data;if(f&&(f.off=!0,f=f.cb)&&(n=ze[f._cId])){for(i=d._data(this).events[e.type],s=i.length;s--&&!t;)t=(r=i[s].data)&&r.cb&&r.cb._cId===f._cId;t||(delete n[Ye(this).obId],Kt(n,f._cId))}}},I.map=function(e){function n(t,i,s,r){var f,l=this;this.src&&this.unmap(),typeof t===Be&&(l.src=t,l.tgt=s||l.tgt||[],l.options=i||l.options,l.update(),r||(e.obsSrc&&H(l.src).observeAll(l.obs=function(o,u){f||(f=!0,e.obsSrc(l,o,u),f=void 0)},l.srcFlt),e.obsTgt&&H(l.tgt).observeAll(l.obt=function(o,u){f||(f=!0,e.obsTgt(l,o,u),f=void 0)},l.tgtFlt)))}return D(e)&&(e={getTgt:e}),e.baseMap&&(e=d.extend({},e.baseMap,e)),e.map=function(t,i,s,r){return new n(t,i,s,r)},(n.prototype={srcFlt:e.srcFlt||Xt,tgtFlt:e.tgtFlt||Xt,update:function(t){var i=this;H(i.tgt).refresh(e.getTgt(i.src,i.options=t||i.options))},unmap:function(){var t=this;t.src&&(t.obs&&H(t.src).unobserveAll(t.obs,t.srcFlt),t.obt&&H(t.tgt).unobserveAll(t.obt,t.tgtFlt),t.src=void 0)},map:n,_def:e}).constructor=n,e},j.advSet=function(){j._gccb=this._gccb,E._jsv=ce.advanced._jsv?{cbBindings:ze}:void 0}}if(Ie=I.settings,ce=j.settings,Se=ce.advanced,ye=I.converters,d.templates=pe=I.templates,Fe=I.tags,On=/<(?!script)(\w+)[>\s]/,d.link)return d;ce.trigger=!0;var rn,fn,pn,Qe,Yt,Re,Me,Zt,Ae="data-jsv",$t="change.jsv",$n="onBeforeChange",et="onAfterChange",ei="onAfterCreate",Ze="checked",An="checkbox",ln="radio",gn="none",Tn="SCRIPT",mn="true",ni='"><\/script>',ti='<script type="jsv',ii=Ae+"-df",nt="script,["+Ae+"]",tt={value:"val",input:"val",html:ke,text:"text"},si={from:"value",to:"value"},it=0,ps=d.cleanData,ri=Ie.delimiters,fi=document.createDocumentFragment(),st=document.querySelector,rt={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},gs={tr:"table"},ft={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},li={},Te={},oi=1,ms=/^#(view\.?)?/,_s=/((\/>)|<\/(\w+)>|)(\s*)([#\/]\d+(?:_|(\^)))`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>)|$)/g,ai=/(#)()(\d+)(_)/g,bs=/(#)()(\d+)([_^])/g,di=/(?:(#)|(\/))(\d+)(_)/g,vs=/(#)()(\d+)(\^)/g,ys=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,xs=/&(\d+)\+?/g,ui=E.getComputedStyle;if(H=d.observable,!H)throw requiresStr+"JsObservable";J=H.observe;function $e(e,n,t){for(var i,s,r,f,l,o,u,g,m,c,h,a,_,b,C,y,k,p,v=e.target,w=v._jsvBnd;c=xs.exec(w);)if((c=Te[c[1]])&&(C=c.to)){if(f=c.linkCtx,m=f.view,b=f.tag||m.tag,g=d(v),a=m.hlp($n),_=m.hlp(et),r=_n(v),i=tt[r],t===void 0&&(t=D(r)?r(v):i?g[i]():g.attr(r)),o=C[1],C=C[0],C=C+""===C?[f.data,C]:C,o&&(D(o)?l=o:l=m.getRsc("converters",o)),f.elem.nodeName==="SELECT"&&(f.elem._jsvSel=t=t||(f.elem.multiple?[]:t)),l&&(t=l.call(b,t)),h=m.linkCtx,m.linkCtx=f,y={change:"change",oldValue:f._val,value:t},(!a||!(s=a.call(f,e,y)===!1))&&(!b||!b.onBeforeChange||!(s=b.onBeforeChange(e,y)===!1))&&t!==void 0&&(u=C[0],t!==void 0&&u)){if(u._jsv)for(p=f._ctxCb,k=u,u=f.data,k._cpCtx&&(u=k.data,p=k._cpCtx);k&&k.sb;)u=p(k,u),k=k.sb;b&&(b._.chging=!0),H(u).setProperty(C[1],t),_&&_.call(f,e,y),b&&(b.onAfterChange&&b.onAfterChange(e,y),b._.chging=void 0),f._val=t}m.linkCtx=h}}function ws(e,n,t){var i,s,r,f,l,o,u=this,g=u.tag,m=u.data,c=u.elem,h=u.convert,a=c.parentNode,_=u.view,b=_.linkCtx,C=_.hlp($n);if(_.linkCtx=u,a&&(!C||!(n&&C.call(u,e,n)===!1))&&!(n&&e.data.prop!=="*"&&e.data.prop!==n.path)){if(n&&(u.eventArgs=n),n||u._toLk){if(u._toLk=0,t._er)try{s=t(m,_)}catch(y){l=t._er,o=Ot(y,_,new Function("data,view","return "+l+";")(m,_)),s=[{props:{},args:[o]}]}else s=t(m,_,j);if(i=Es(s,u,g=u.tag,u.attr||_n(c,!0,h!==void 0)),g){if(f=l||g._er,s=s[0]?s:[s],r=!f&&n&&g.onUpdate&&g.onUpdate(e,n,s)===!1,yi(g,s,f),r||i===gn){Sn(g,e,n),gi(u,m,c),_.linkCtx=b;return}if(g._.chging)return;g.onUnbind&&g.onUnbind(g.tagCtx,u,g.ctx,e,n),s=g.tagName===":"?j._cnvt(g.cvt,_,s[0]):j._tag(g,_,_.tmpl,s,!0,o)}else t._tag&&(h=h===""?mn:h,s=h?j._cnvt(h,_,s[0]||s):j._tag(t._tag,_,_.tmpl,s,!0,o),vn(g=u.tag,!0),i=u.attr||i);ci(s,u,i,g)&&n&&(C=_.hlp(et))&&C.call(u,e,n),u._noUpd=0,g&&(g._er=l,Sn(g,e,n))}gi(u,m,c),_.linkCtx=b}}function Es(e,n,t,i){var s,r,f,l,o=t&&t.parentElem||n.elem;if(e!==void 0){if(l=d(o),i=t&&t.attr||i,D(e)&&Oe(n.expr+": missing parens"),f=/^css-/.test(i)&&i.slice(4))s=d.style(o,f),+e===e&&(s=parseInt(s));else if(i!=="link"){if(i==="value")o.type===An&&(s=l.prop(i=Ze));else if(i===ln)if(o.value===""+e)s=l.prop(Ze);else return i;s===void 0&&(r=tt[i],s=r?l[r]():l.attr(i))}n._val=s}return i}function He(e,n){e._df=n,e[(n?"set":"remove")+"Attribute"](ii,"")}function ci(e,n,t,i){var s,r,f,l,o,u,g,m,c,h,a,_,b,C,y=t!==gn&&e!==void 0&&!n._noUpd,k=n.data,p=i&&i.parentElem||n.elem,v=p.parentNode,w=d(p),L=n.view,X=n._val,B=L.linkCtx,S=i;if(i&&(i._.unlinked=!0,i.parentElem=i.parentElem||n.expr||i._elCnt?p:v,r=i._prv,f=i._nxt),!!y)return t==="visible"&&(t="css-display"),/^css-/.test(t)?(n.attr==="visible"&&(b=(p.currentStyle||ui.call(E,p,"")).display,e?(e=p._jsvd||b,e===gn&&!(e=li[_=p.nodeName])&&(a=document.createElement(_),document.body.appendChild(a),e=li[_]=(a.currentStyle||ui.call(E,a,"")).display,document.body.removeChild(a))):(p._jsvd=b,e=gn)),(S=S||X!==e)&&d.style(p,t.slice(4),e)):t!=="link"&&(/^data-/.test(t)&&d.data(p,t.slice(5),e),t===Ze?(u=!0,e=e&&e!=="false"):t===ln?(u=!0,t=Ze,e=p.value===""+e):t==="selected"||t==="disabled"||t==="multiple"||t==="readonly"?e=e&&e!=="false"?t:null:t==="value"&&p.nodeName==="SELECT"&&(p._jsvSel=V(e)?e:""+e),(s=tt[t])?t===ke?(L.linkCtx=n,i&&i._.inline?(o=i.nodes(!0),i._elCnt&&(r&&r!==f?ct(r,f,p,i._tgId,"^",!0):(g=p._df)&&(m=i._tgId+"^",c=g.indexOf("#"+m)+1,h=g.indexOf("/"+m),c&&h>0&&(c+=m.length,h>c&&(He(p,g.slice(0,c)+g.slice(h)),wi(g.slice(c,h))))),r=r?r.previousSibling:f?f.previousSibling:p.lastChild),d(o).remove(),l=L.link(L.data,p,r,f,e,i&&{tag:i._tgId,lazyLink:i.tagCtx.props.lazyLink})):(y=y&&X!==e,y&&w.empty(),y&&(l=L.link(k,p,r,f,e,i&&{tag:i._tgId}))),L.linkCtx=B):((S=S||X!==e)&&(t==="text"&&p.children&&!p.children[0]?p.textContent!==void 0?p.textContent=e:p.innerText=e===null?"":e:w[s](e)),(C=v._jsvSel)&&(t==="value"||!w.attr("value"))&&(p.selected=d.inArray(""+e,V(C)?C:[C])>-1)):(S=S||X!==e)&&w[u?"prop":"attr"](t,e===void 0&&!u?null:e),n._val=e),l||S}function hi(e,n){var t=this,i=t.hlp($n),s=t.hlp(et);if(!i||i.call(this,e,n)!==!1){if(n){var r=n.change,f=n.index,l=n.items;switch(t._.srt=n.refresh,r){case"insert":t.addViews(f,l);break;case"remove":t.removeViews(f,l.length);break;case"move":t.removeViews(n.oldIndex,l.length,void 0,!0),t.addViews(f,l);break;case"refresh":t._.srt=void 0,t.fixIndex(0)}}s&&s.call(this,e,n)}}function lt(e){var n,t,i=e.type,s=e.data,r=e._.bnd;!e._.useKey&&r&&((t=e._.bndArr)&&(d([t[1]]).off(Ke,t[0]),e._.bndArr=void 0),r!==!!r?i?r._.arrVws[e._.id]=e:delete r._.arrVws[e._.id]:i&&s&&(n=function(f){f.data&&f.data.off||hi.apply(e,arguments)},d([s]).on(Ke,n),e._.bndArr=[n,s]))}function _n(e,n,t){var i=e.nodeName.toLowerCase(),s=Se._fe[i]||e.contentEditable===mn&&{to:ke,from:ke};return s?n?i==="input"&&e.type===ln?ln:s.to:s.from:n?t?"text":ke:""}function pi(e,n,t,i,s,r,f){var l,o,u,g,m,c=e.parentElem,h=e._prv,a=e._nxt,_=e._elCnt;if(h&&h.parentNode!==c&&Oe("Missing parentNode"),f){g=e.nodes(),_&&h&&h!==a&&ct(h,a,c,e._.id,"_",!0),e.removeViews(void 0,void 0,!0),o=a,_&&(h=h?h.previousSibling:a?a.previousSibling:c.lastChild),d(g).remove();for(m in e._.bnds)Fn(m)}else{if(n){if(u=i[n-1],!u)return!1;h=u._nxt}_?(o=h,h=o?o.previousSibling:c.lastChild):o=h.nextSibling}l=t.render(s,r,e._.useKey&&f,e,f||n,!0),e.link(s,c,h,o,l,u)}function ot(e,n,t){var i,s;return t?(s="^`",vn(t,!0),i=t._tgId,i||(Te[i=oi++]=t,t._tgId=""+i)):(s="_`",vn(Me[i=n._.id]=n)),"#"+i+s+(e??"")+"/"+i+s}function gi(e,n,t){var i,s,r,f,l,o,u,g,m=e.tag,c=e.convertBack,h=[],a=e._bndId||""+oi++,_=e._hdl;if(e._bndId=void 0,m&&(h=m.depends||h,h=D(h)?m.depends(m):h,f=m.linkedElem),!e._depends||""+e._depends!=""+h){if(e._depends&&H._apply(!1,[n],e._depends,_,!0),l=e.fn.deps.slice(),m&&m.boundProps)for(s=m.boundProps.length;s--;)for(u=m.boundProps[s],r=m._.bnd.paths.length;r--;)g=m._.bnd.paths[r][u],g&&g.skp&&(l=l.concat(g));for(s=l.length;s--;)o=l[s],o._jsv&&(l[s]=fe({},o));if(i=H._apply(!1,[n],l,h,_,e._ctxCb),i.elem=t,i.linkCtx=e,i._tgId=a,t._jsvBnd=t._jsvBnd||"",t._jsvBnd+="&"+a,e._depends=h,e.view._.bnds[a]=a,Te[a]=i,f)for(s=f.length;s--;)f[s]._jsvLkEl=m,Rn(i,m,f[s]),f[s]._jsvBnd="&"+i._tgId+"+";else c!==void 0&&Rn(i,m,t,c);m&&!m.flow&&!m._.inline&&(t.setAttribute(Ae,(t.getAttribute(Ae)||"")+"#"+a+"^/"+a+"^"),m._tgId=""+a)}}function mi(e,n,t,i,s,r,f){return at(this,e,n,t,i,s,r,f)}function at(e,n,t,i,s,r,f,l){if(i===!0?(s=i,i=void 0):typeof i!="object"?i=void 0:i=fe({},i),e&&n){n=n.jquery?n:d(n),rn||(rn=document.body,d(rn).on($t,$e).on("blur","[contenteditable]",$e));for(var o,u,g,m,c,h,a,_,b,C=ot,y=i&&i.target==="replace",k=n.length;k--;){if(a=n[k],r=r||pn(a),(b=r===A)&&(A.data=(A.ctx=i||{}).root=t),""+e===e)dt(e,a,r,void 0,!0,t,i);else{if(e.markup!==void 0)y&&(h=a.parentNode),g=e.render(t,i,s,r,void 0,C),h?(f=a.previousSibling,l=a.nextSibling,d.cleanData([a],!0),h.removeChild(a),a=h):(f=l=void 0,d(a).empty());else if(e===!0&&r===A)_={lnk:1};else break;if(a._df&&!l){for(m=je(a._df,!0,ai),o=0,u=m.length;o<u;o++)c=m[o],(c=Me[c.id])&&c.data!==void 0&&c.parent.removeViews(c._.key,void 0,!0);He(a)}r.link(t,a,f,l,g,_,i)}b&&(A.data=A.ctx=void 0)}}return n}function Is(e,n,t,i,s,r,f,l){function o(me,z,te,he,we,Ee,Ve,Hn,on,xn,an,Ls,pt,Fs){var wn,Ai,gt="";return Fs?(c=0,me):(a=on||xn||"",he=he||an,te=te||pt,oe&&!te&&(!me||he||a||Ee&&!c)&&(oe=void 0,P=Je.shift()),he=he||te,he&&(c=0,oe=void 0,Y&&(te||pt?!ft[P]&&!/;svg;|;math;/.test(";"+Je.join(";")+";")&&(wn="'<"+P+".../"):ft[he]?wn="'</"+he:(!Je.length||he!==P)&&(wn="Mismatch: '</"+he),wn&&be(wn+`>' in:
`+s)),se=N,P=Je.shift(),N=rt[P],an=an?"</"+an+">":"",se&&(Le+=de,de="",N?Le+="-":(gt=an+ti+"@"+Le+ni+(Ls||""),Le=Ci.shift()))),N?(Ee?de+=Ee:z=an||pt||"",a&&(z+=a,de&&(z+=" "+Ae+'="'+de+'"',de=""))):z=Ee?z+gt+we+(c?"":ti+Ee+ni)+Hn+a:gt||me,Y&&Ve&&(c&&be("{^{ within elem markup ("+c+' ). Use data-link="..."'),Ee.charAt(0)==="#"?Je.unshift(Ee.slice(1)):Ee.slice(1)!==(Ai=Je.shift())&&be("Closing tag for {^{...}} under different elem: <"+Ai+">")),a&&(c=a,Je.unshift(P),P=a.slice(1),Y&&Je[0]&&Je[0]===gs[P]&&Oe("Parent of <tr> must be <tbody>"),oe=ft[P],(N=rt[P])&&!se&&(Ci.unshift(Le),Le=""),se=N,Le&&N&&(Le+="+")),z)}function u(me,z){var te,he,we,Ee,Ve,Hn,on,xn=[];if(me){for(me._tkns.charAt(0)==="@"&&(z=p.previousSibling,p.parentNode.removeChild(p),p=void 0),y=me.length;y--;){if(w=me[y],we=w.ch,te=w.path)for(C=te.length-1;he=te.charAt(C--);)he==="+"?te.charAt(C)==="-"?(C--,z=z.previousSibling):z=z.parentNode:z=z.lastChild;we==="^"?(a=Te[Ve=w.id])&&(on=z&&(!p||p.parentNode!==z),(!p||on)&&(a.parentElem=z),w.elCnt&&on&&He(z,(w.open?"#":"/")+Ve+we+(z._df||"")),xn.push([on?null:p,w])):(v=Me[Ve=w.id])&&(v.parentElem||(v.parentElem=z||p&&p.parentNode||n,v._.onRender=ot,v._.onArrayChange=hi,lt(v)),Ee=v.parentElem,w.open?(v._elCnt=w.elCnt,z&&!p?He(z,"#"+Ve+we+(z._df||"")):(v._prv||He(Ee,jn(Ee._df,"#"+Ve+we)),v._prv=p)):(z&&(!p||p.parentNode!==z)?(He(z,"/"+Ve+we+(z._df||"")),v._nxt=void 0):p&&(v._nxt||He(Ee,jn(Ee._df,"/"+Ve+we)),v._nxt=p),(Hn=v.ctx&&v.ctx[ei]||Rs)&&Hn.call(v.ctx.tag,v)))}for(y=xn.length;y--;)yn.push(xn[y])}return!me||me.elCnt}function g(me){var z,te,he;if(me){for(y=me.length,C=0;C<y;C++)if(w=me[C],te=a=Te[w.id].linkCtx.tag,he=a.tagName===G,!a.flow||he){if(!$){for(z=1;te=te.parent;)z++;q=q||z}($||z===q)&&(!G||he)&&Q.push(a)}}}function m(){var me,z,te="",he={},we=Yt+(xe?",["+ii+"]":"");for(k=st?n.querySelectorAll(we):d(we,n).get(),b=k.length,t&&t.innerHTML&&(X=st?t.querySelectorAll(we):d(we,t).get(),t=X.length?X[X.length-1]:t),q=0,_=0;_<b;_++)if(p=k[_],t&&!Ge)Ge=p===t;else if(i&&p===i){xe&&(te+=bn(p));break}else if(p.parentNode)if(xe){if(te+=bn(p),p._df){for(me=_+1;me<b&&p.contains(k[me]);)me++;he[me-1]=p._df}he[_]&&(te+=he[_]||"")}else We&&(w=je(p,void 0,di))&&(w=w[0])&&(Pe=Pe?w.id!==Pe&&Pe:w.open&&w.id),!Pe&&ki(je(p))&&p.getAttribute(Qe)&&yn.push([p]);if(xe&&(te+=n._df||"",(z=te.indexOf("#"+xe.id)+1)&&(te=te.slice(z+xe.id.length)),z=te.indexOf("/"+xe.id),z+1&&(te=te.slice(0,z)),g(je(te,void 0,vs))),s===void 0&&n.getAttribute(Qe)&&yn.push([n]),bi(t,N),bi(i,N),xe){Ue&&Ue.resolve();return}for(N&&Le+de&&(p=i,Le&&(i?u(je(Le+"+",!0),i):u(je(Le,!0),n)),u(je(de,!0),n),i&&(te=i.getAttribute(Ae),(b=te.indexOf(ve)+1)&&(te=te.slice(b+ve.length-1)),i.setAttribute(Ae,de+te))),b=yn.length,_=0;_<b;_++)p=yn[_],L=p[1],p=p[0],L?(a=Te[L.id])&&((h=a.linkCtx)&&(a=h.tag,a.linkCtx=h),L.open?(p&&(a.parentElem=p.parentNode,a._prv=p),a._elCnt=L.elCnt,v=a.tagCtx.view,dt(void 0,a._prv,v,L.id)):(a._nxt=p,a._.unlinked&&(ge=a.tagCtx,v=ge.view,Sn(a)))):dt(p.getAttribute(Qe),p,pn(p),void 0,We,e,f);Ue&&Ue.resolve()}var c,h,a,_,b,C,y,k,p,v,w,L,X,B,S,R,W,Q,$,G,ge,Y,q,M,Z,O,ue,P,oe,ae,K,ee,N,se,_e,de,ve,Ge,Pe,Ue,We,xe,ht=this,Ii=ht._.id+"_",Le="",yn=[],Je=[],Ci=[],Rs=ht.hlp(ei),ki=u;if(r&&(Ue=r.lazyLink&&d.Deferred(),r.tmpl?S="/"+r._.id+"_":(We=r.lnk,r.tag&&(Ii=r.tag+"^",r=!0),(xe=r.get)&&(ki=g,Q=xe.tags,$=xe.deep,G=xe.name)),r=r===!0),n=n?""+n===n?d(n)[0]:n.jquery?n[0]:n:ht.parentElem||document.body,Y=!Se.noValidate&&n.contentEditable!==mn,P=n.tagName.toLowerCase(),N=!!rt[P],t=t&&vi(t,N),i=i&&vi(i,N)||null,s!=null){if(K=document.createElement("div"),ae=K,ve=de="",_e=n.namespaceURI==="http://www.w3.org/2000/svg"?"svg_ns":(ue=On.exec(s))&&ue[1]||"",N){for(W=i;W&&!(R=je(W));)W=W.nextSibling;(ee=R?R._tkns:n._df)&&(B=S||"",(r||!S)&&(B+="#"+Ii),C=ee.indexOf(B),C+1&&(C+=B.length,ve=de=ee.slice(0,C),ee=ee.slice(C),R?W.setAttribute(Ae,ee):He(n,ee)))}if(oe=void 0,s=(""+s).replace(_s,o),Y&&Je.length&&be("Mismatched '<"+P+`...>' in:
`+s),l)return;for(fi.appendChild(K),_e=Re[_e]||Re.div,M=_e[0],ae.innerHTML=_e[1]+s+_e[2];M--;)ae=ae.lastChild;for(fi.removeChild(K),Z=document.createDocumentFragment();O=ae.firstChild;)Z.appendChild(O);n.insertBefore(Z,i)}return Ue?setTimeout(m,0):m(),Ue&&Ue.promise()}function dt(e,n,t,i,s,r,f){var l,o,u,g,m,c,h,a,_,b,C,y=[];if(i)a=Te[i],a=a.linkCtx?a.linkCtx.tag:a,h=a.linkCtx||{type:"inline",data:t.data,elem:a._elCnt?a.parentElem:n,view:t,ctx:t.ctx,attr:ke,fn:a._.bnd,tag:a,_bndId:i},_i(h,h.fn);else if(e&&n){for(r=s?r:t.data,l=t.tmpl,e=Cs(e,_n(n)),C=fn.lastIndex=0;o=fn.exec(e);)y.push(o),C=fn.lastIndex;for(C<e.length&&be(e);o=y.shift();){for(_=fn.lastIndex,u=o[1],m=o[3];y[0]&&y[0][4]==="else";)m+=nn+en+y.shift()[3],b=!0;b&&(m+=nn+en+De+"/"+o[4]+Ce),h={type:s?"top":"link",data:r,elem:n,view:t,ctx:f,attr:u,isLk:s,_toLk:1,_noUpd:o[2]},g=void 0,o[6]&&(g=o[10]||void 0,h.convert=o[5]||"",!u&&g!==void 0&&_n(n)&&(h.convertBack=g=g.slice(1))),h.expr=u+m,c=l.links[m],c||(l.links[m]=c=j.tmplFn(m,l,!0,g,b)),h.fn=c,_i(h,c),fn.lastIndex=_}}}function _i(e,n){function t(i,s){ws.call(e,i,s,n)}t.noArray=!0,e.isLk&&vn(e.view=new j.View(j.extendCtx(e.ctx,e.view.ctx),"link",e.view,e.data,e.expr,void 0,ot)),e._ctxCb=j._gccb(e.view),e._hdl=t,t(!0)}function jn(e,n){var t;return e?(t=e.indexOf(n),t+1?e.slice(0,t)+e.slice(t+n.length):e):""}function bn(e){return e&&(""+e===e?e:e.tagName===Tn?e.type.slice(3):e.nodeType===1&&e.getAttribute(Ae)||"")}function je(e,n,t){function i(l,o,u,g,m,c){f.push({elCnt:s,id:g,ch:m,open:o,close:u,path:c,token:l})}var s,r,f=[];if(r=n?e:bn(e))return s=f.elCnt=e.tagName!==Tn,s=r.charAt(0)==="@"||s,f._tkns=r,r.replace(t||ys,i),f}function bi(e,n){e&&(e.type==="jsv"?e.parentNode.removeChild(e):n&&e.getAttribute(Qe)===""&&e.removeAttribute(Qe))}function vi(e,n){for(var t=e;n&&t&&t.nodeType!==1;)t=t.previousSibling;return t&&(t.nodeType!==1?(t=document.createElement(Tn),t.type="jsv",e.parentNode.insertBefore(t,e)):!bn(t)&&!t.getAttribute(Qe)&&t.setAttribute(Qe,"")),t}function Cs(e,n){return e=d.trim(e).replace(xt,"\\$&"),e.slice(-1)!==Ce?e=De+":"+e+(n?":":"")+Ce:e}function Sn(e,n,t){var i,s,r,f,l,o,u,g,m,c,h,a,_,b=e.tagCtx,C=b.view,y=b.props,k=e.linkCtx;if(e._.unlinked&&(e.linkedElement!==void 0&&(e.linkedElem=e._.inline?e.contents(!0,e.linkedElement||"*").first():d(k.elem)),e.onBind&&e.onBind(b,k,e.ctx,n,t)),e.onAfterLink&&e.onAfterLink(b,k,e.ctx,n,t),i=e.targetTag?e.targetTag.linkedElem:e.linkedElem,s=e.displayElem||i,i&&i[0]){if(f=e.cvtArgs()[0],f!==void 0&&!e._.chging)for(l=i.length;l--;)r=i[l],e._.unlinked&&r!==k.elem&&(o=r._jsvLkEl,e._.inline&&(!o||o!==e&&o.targetTag!==e)&&(r._jsvLkEl=e,Rn(Te[e._tgId],e,r),r._jsvBnd="&"+e._tgId+"+")),f!==void 0&&(r.value!==void 0?r.type===An?r[Ze]=f&&f!=="false":r.type===ln?r[Ze]=r.value===f:d(r).val(f):r.contentEditable===mn&&(r.innerHTML=f),k._val=f),y.name&&(r.name=r.name||y.name);e.setSize&&(y.height&&s.height(y.height),y.width&&s.width(y.width)),y.title!==void 0&&s.attr("title",y.title),y.class&&(t&&s.hasClass(t.oldValue)&&s.removeClass(t.oldValue),s.addClass(y.class)),y.id&&(i[0].id=y.id)}e._.unlinked=void 0}function ks(e){setTimeout(function(){$e(e)},0)}function ut(e,n,t){n&&(n=""+n===n?n:"keydown",e[t](n,n==="keydown"?ks:$e))}function Rn(e,n,t,i){var s,r,f,l,o,u,g,m,c,h,a=e.linkCtx,_=a._ctxCb,b=a.data,C=a.fn.paths[0];if(n=n||t._jsvLkEl,e&&C&&!e.to){if(m=t._jsvTr||!1,n&&(i=n.convertBack||i,g=n.tagCtx.props.trigger),g=g===void 0?ce.trigger:g,g=g&&(t.tagName==="INPUT"&&t.type!==An&&t.type!==ln||t.type==="textarea"||t.contentEditable===mn)&&g||!1,m!==g&&(u=d(t),ut(u,m,"off"),ut(u,t._jsvTr=g,"on")),C=(s=C._jsvto)||C[0],r=C&&C.length){if(l=C[r-1],l._jsv){for(o=l;l.sb&&l.sb._jsv;)f=l=l.sb;f=l.sb||f&&f.path,l=f?f.slice(1):o.path}if(f)c=[o,l];else{for(;(c=_(f=l.split("^").join("."),b))&&(h=c.length);){if(c[0]._cp){if(c=c[0],_=j._gccb(c[0]),l=c[1],c=[c[0].data,c[1]],l._jsv){for(o=l,o.data=c[0],o._cpCtx=_;l.sb&&l.sb._jsv;)f=l=l.sb;f=l.sb||f&&f.path,l=f?f.slice(1):o.path,c=[o,l]}}else c=h>2?[c[h-3],c[h-2]]:[c[h-2]];b=c[0],l=c[1]}c=c||[b,f]}}else c=[];e.to=[c,i]}}function yi(e,n,t){var i,s,r=e.tagCtx.view,f=e.tagCtxs||[e.tagCtx],l=f.length,o=!n;if(n=n||e._.bnd.call(r.tmpl,(e.linkCtx||r).data,r,j),t)f=e.tagCtxs=n,e.tagCtx=f[0];else for(;l--;)i=f[l],s=n[l],H(i.props).setProperty(s.props),fe(i.ctx,s.ctx),i.args=s.args,o&&(i.tmpl=s.tmpl);return j._ths(e,f[0]),f}function Ln(e){for(var n,t,i,s=[],r=e.length,f=r;f--;)s.push(e[f]);for(f=r;f--;)if(t=s[f],t.parentNode){if(i=t._jsvBnd)for(i=i.slice(1).split("&"),t._jsvBnd="",n=i.length;n--;)Fn(i[n],t._jsvLkEl,t);wi(bn(t)+(t._df||""))}}function Fn(e,n,t){var i,s,r,f,l,o,u,g,m,c,h,a,_,b=Te[e];if(n)n=n.targetTag||n,t._jsvLkEl=void 0;else if(b){delete Te[e];for(i in b.bnd)f=b.bnd[i],l=b.cbId,V(f)?d([f]).off(Ke+l).off(qe+l):d(f).off(qe+l),delete b.bnd[i];if(s=b.linkCtx){if(r=s.tag){if(o=r.tagCtxs)for(u=o.length;u--;)(g=o[u].map)&&g.unmap();m=r.linkedElem,r.onUnbind&&r.onUnbind(r.tagCtx,s,r.ctx,!0),r.onDispose&&r.onDispose(),r._elCnt||(r._prv&&r._prv.parentNode.removeChild(r._prv),r._nxt&&r._nxt.parentNode.removeChild(r._nxt))}c=m&&m[0]||s.elem,(h=c&&c._jsvTr)&&(ut(m||d(c),h,"off"),c._jsvTr=void 0),a=s.view,a.type==="link"?a.parent.removeViews(a._.key,void 0,!0):delete a._.bnds[e]}delete ze[b.cbId]}}function xi(e){e?(e=e.jquery?e:d(e),e.each(function(){for(var n;(n=pn(this,!0))&&n.parent;)n.parent.removeViews(n._.key,void 0,!0);Ln(this.getElementsByTagName("*"))}),Ln(e)):(rn&&(d(rn).off($t,$e).off("blur","[contenteditable]",$e),rn=void 0),A.removeViews(),Ln(document.body.getElementsByTagName("*")))}function As(e){return e.type===An?e[Ze]:e.value}j.onStore.template=function(e,n){n.link=mi,e&&(d.link[e]=function(){return mi.apply(n,arguments)})},j.viewInfos=je,(Ie.delimiters=function(){var e=ri.apply(0,arguments);return ri!==kn&&(e=kn.apply(0,arguments)),fn=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+cn+")?(\\"+De+j.rTag+"(:\\w*)?\\"+Ce+")","g"),e})(),j.addSetting("trigger");function ct(e,n,t,i,s,r){var f,l,o,u,g,m,c,h=0,a=e===n;if(e){for(o=je(e)||[],f=0,l=o.length;f<l;f++){if(u=o[f],m=u.id,m===i&&u.ch===s)if(r)l=0;else break;a||(g=u.ch==="_"?Me[m]:Te[m].linkCtx.tag,u.open?g._prv=n:u.close&&(g._nxt=n)),h+=m.length+2}h&&e.setAttribute(Ae,e.getAttribute(Ae).slice(h)),c=n?n.getAttribute(Ae):t._df,(l=c.indexOf("/"+i+s)+1)&&(c=o._tkns.slice(0,h)+c.slice(l+(r?-1:i.length+1))),c&&(n?n.setAttribute(Ae,c):He(t,c))}else He(t,jn(t._df,"#"+i+s)),!r&&!n&&He(t,jn(t._df,"/"+i+s))}function wi(e){var n,t,i,s;if(s=je(e,!0,bs))for(n=0,t=s.length;n<t;n++)i=s[n],i.ch==="_"?(i=Me[i.id])&&i.type&&i.parent.removeViews(i._.key,void 0,!0):Fn(i.id)}function vn(e,n){e.contents=function(t,i){t!==!!t&&(i=t,t=void 0);var s,r=d(this.nodes());return r[0]&&(s=i?r.filter(i):r,r=t&&i?s.add(r.find(i)):s),r},e.nodes=function(t,i,s){var r,f=this,l=f._elCnt,o=!i&&l,u=[];for(i=i||f._prv,s=s||f._nxt,r=o?i===f._nxt?f.parentElem.lastSibling:i:f._.inline===!1?i||f.linkCtx.elem.firstChild:i&&i.nextSibling;r&&(!s||r!==s);)(t||l||r.tagName!==Tn)&&u.push(r),r=r.nextSibling;return u},e.childTags=function(t,i){t!==!!t&&(i=t,t=void 0);var s=this,r=s.link?s:s.tagCtx.view,f=s._prv,l=s._elCnt,o=[];return r.link(void 0,s.parentElem,l?f&&f.previousSibling:f,s._nxt,void 0,{get:{tags:o,deep:t,name:i,id:s.link?s._.id+"_":s._tgId+"^"}}),o},e.refresh=function(t){var i,s,r=this,f=r.linkCtx,l=r.tagCtx.view;return r.disposed&&Oe("Removed tag"),t===void 0&&(t=j._tag(r,l,l.tmpl,yi(r),!0)),t+""===t&&(r.onUnbind&&r.onUnbind(r.tagCtx,f,r.ctx),s=r._.inline?ke:f.attr||_n(r.parentElem,!0),i=ci(t,f,s,r)),Sn(r),i||r},e.update=function(t){var i=this.linkedElem;i&&$e({target:i[0]},void 0,t)},n?e.domChange=function(){var t=this.parentElem,i=d.hasData(t)&&d._data(t).events,s="jsv-domchange";i&&i[s]&&d(t).triggerHandler(s,arguments)}:(e.addViews=function(t,i){var s,r,f=this,l=i.length,o=f.views;!f._.useKey&&l&&(r=o.length+l,r===f.data.length&&pi(f,t,f.tmpl,o,i,f.ctx)!==!1&&(f._.srt||f.fixIndex(t+l)))},e.removeViews=function(t,i,s,r){function f(h){var a,_,b,C,y,k,p=c[h];if(p&&p.link){if(a=p._.id,s||(k=p.nodes()),p.removeViews(void 0,void 0,!0),p.type=void 0,C=p._prv,y=p._nxt,b=p.parentElem,s||(p._elCnt&&ct(C,y,b,a,"_"),d(k).remove()),!p._elCnt)try{C.parentNode.removeChild(C),y.parentNode.removeChild(y)}catch{}lt(p);for(_ in p._.bnds)Fn(_);delete Me[a]}}var l,o,u,g=this,m=!g._.useKey,c=g.views;if(m&&(u=c.length),t===void 0)if(m){for(l=u;l--;)f(l);g.views=[]}else{for(o in c)f(o);g.views={}}else if(i===void 0&&(m?i=1:(f(t),delete c[t])),m&&i&&(r||u-i===g.data.length)){for(l=t+i;l-- >t;)f(l);c.splice(t,i),g._.sort||g.fixIndex(t)}},e.refresh=function(){var t=this,i=t.parent;i&&(pi(t,t.index,t.tmpl,i.views,t.data,void 0,!0),lt(t))},e.fixIndex=function(t){for(var i=this.views,s=i.length;t<s--;)i[s].index!==s&&H(i[s]).setProperty("index",s)},e.link=Is)}ye.merge=function(e){var n,t=this.linkCtx._val||"",i=this.tagCtx.props.toggle;return i&&(n=i.replace(/[\\^$.|?*+()[{]/g,"\\$&"),n="(\\s(?="+n+"$)|(\\s)|^)("+n+"(\\s|$))",t=t.replace(new RegExp(n),"$2"),e=t+(e?(t&&" ")+i:"")),e};function Ei(e){return this.tagCtx.view}Fe({on:{attr:gn,init:function(e){for(var n,t=this,i=0,s=e.args,r=s.length;i<r&&!D(s[i]);i++);t._hi=r>i&&i+1,t._.inline&&(j.rTmpl.exec(n=e.tmpl.markup)||(t.template="<button>"+(d.trim(n)||e.params.args[i]||"noop")+"</button>"),t.attr=ke)},onAfterLink:function(e,n){var t,i,s,r,f=this,l=f._hi,o=e.args,u=o.length,g=e.props,m=g.data,c=e.view,h=g.context;l&&(t=o[l-1],i=o.slice(l),o=o.slice(0,l-1),f._sel=o[1],r=f.activeElem=f.activeElem||d(f._.inline?(f._sel=o[1]||"*",f.parentElem):n.elem),h||(h=/^(.*)[\.^][\w$]+$/.exec(e.params.args.slice(-i.length-1)[0]),h=h&&j.tmplFn(De+":"+h[1]+Ce,c.tmpl,!0)(n.data,c)),f._evs&&f.onUnbind(),r.on(f._evs=o[0]||"click",f._sel,m??null,f._hlr=function(_){var b,C,y=!f._.inline;if(!y)for(b=f.contents("*"),u=b.length;!y&&u--;)b[u].contains(_.target)&&(y=!0);if(y)return t.apply(h||n.data,[].concat(i,_,{change:_.type,view:c,linkCtx:n},i.slice.call(arguments,1)))}))},onUpdate:function(){return!1},onUnbind:function(){var e=this;e.activeElem&&e.activeElem.off(e._evs,e._sel,e._hlr)},flow:!0,contentCtx:Ei,dataBoundOnly:!0},radiogroup:{init:function(e){this.name=e.props.name||"jsv"+Math.random()},onBind:function(e,n){var t,i=this,s=i.linkedElem=i._.inline?i.contents(!0,"input[type=radio]"):d(n.elem).find("input[type=radio]"),r=s.length;for(i._.inline?(t=i.contents("*")[0],t=t&&d.view(t).ctx.tag===i.parent?t:i.parentElem):t=n.elem;r--;)s[r].name=s[r].name||i.name;d(t).on("jsv-domchange",function(f,l){var o,u=l.ctx.parentTags;if(!i._.inline||t!==i.parentElem||u&&u[i.tagName]===i)for(s=i.linkedElem=i.contents(!0,"input[type=radio]"),r=s.length;r--;)o=s[r],o._jsvLkEl=i,o.name=o.name||i.name,Rn(Te[i._tgId],i,o),o._jsvBnd="&"+i._tgId+"+",o.checked=i.cvtArgs()[0]===o.value})},onUpdate:function(e,n,t){return!1},contentCtx:Ei,dataBoundOnly:!0}}),fe(Fe.for,{onArrayChange:function(e,n,t,i){var s,r=e.target,f=r.length,l=this,o=n.change;if(l._.noVws||l.tagCtxs[1]&&(o==="insert"&&f===n.items.length||o==="remove"&&!f))l.refresh();else for(s in l._.arrVws)s=l._.arrVws[s],s.data===r&&s._.onArrayChange.apply(s,arguments);l.domChange(t,i,n),e.done=!0},onAfterLink:function(e,n){var t,i,s,r,f=this,l=f._ars||{},o=f.tagCtxs,u=o.length,g=f.selected||0;for(t=0;t<=g;t++)e=o[t],r=e.map?e.map.tgt:e.args.length?e.args[0]:e.view.data,(s=l[t])&&r!==s[0]&&(J(s[0],s[1],!0),delete l[t]),!l[t]&&V(r)&&(J(r,i=function(m,c){var h=e;f.onArrayChange(m,c,h,n)}),l[t]=[r,i]);for(t=g+1;t<u;t++)(s=l[t])&&(J(s[0],s[1],!0),delete l[t]);f._ars=l},onDispose:function(){var e,n=this;for(e in n._ars)J(n._ars[e][0],n._ars[e][1],!0)}}),fe(Fe.if,{onUpdate:function(e,n,t){var i,s,r;for(i=0;s=this.tagCtxs[i];i++)if(r=s.props.tmpl!==t[i].props.tmpl||s.args.length&&!(s=s.args[0])!=!t[i].args[0],!this.convert&&!!s||r)return r;return!1},onAfterLink:function(e,n,t,i,s){s&&this.domChange(e,n,s)}});function Ts(e,n,t){if(t.change==="set"){for(var i=e.tgt,s=i.length;s--&&i[s].key!==t.path;);s===-1?t.path&&!t.remove&&H(i).insert({key:t.path,prop:t.value}):t.remove?H(i).remove(s):H(i[s]).setProperty("prop",t.value)}}function js(e,n,t){var i,s=e.src,r=t.change;r==="set"?t.path==="prop"?H(s).setProperty(n.target.key,t.value):(H(s).removeProperty(t.oldValue),H(s).setProperty(t.value,n.target.prop)):r==="remove"?(i=t.items[0],H(s).removeProperty(i.key),delete s[i.key]):r==="insert"&&(i=t.items[0],i.key&&H(s).setProperty(i.key,i.prop))}function Ss(e){return e.indexOf(".")<0}return Fe("props",{baseTag:"for",dataMap:I.map({getTgt:Fe.props.dataMap.getTgt,obsSrc:Ts,obsTgt:js,tgtFlt:Ss}),flow:!0}),fe(d,{view:pn=function(e,n,t){function i(h,a){if(h)for(r=je(h,a,ai),l=0,o=r.length;l<o&&!((s=Me[r[l].id])&&(s=s&&t?s.get(!0,t):s));l++);}n!==!!n&&(t=n,n=void 0);var s,r,f,l,o,u,g,m=0,c=document.body;if(e&&e!==c&&A._.useKey>1&&(e=""+e===e?d(e)[0]:e.jquery?e[0]:e,e)){if(n){if(i(e._df,!0),!s)for(g=st?e.querySelectorAll(nt):d(nt,e).get(),u=g.length,f=0;!s&&f<u;f++)i(g[f]);return s}for(;e;){if(r=je(e,void 0,di))for(u=r.length;u--;)if(s=r[u],s.open){if(m<1)return s=Me[s.id],s&&t?s.get(t):s||A;m--}else m++;e=e.previousSibling||e.parentNode}}return A},link:at,unlink:xi,cleanData:function(e){e.length&&it&&Ln(e),ps.apply(d,arguments)}}),fe(d.fn,{link:function(e,n,t,i,s,r,f){return at(e,this,n,t,i,s,r,f)},unlink:function(){return xi(this)},view:function(e,n){return pn(this[0],e,n)}}),d.each([ke,"replaceWith","empty","remove"],function(e,n){var t=d.fn[n];d.fn[n]=function(){var i;it=1;try{i=t.apply(this,arguments)}finally{it=0}return i}}),vn(fe(A=j.topView,{tmpl:{links:{}}})),Me={0:A},I.getCtx=function(e){return e&&e._cp&&(e=e[1](e[0].data,e[0],j)),e},j._cp=function(e,n,t){if(t.linked){n=De+":"+n+Ce;var i=t.tmpl,s=A.tmpl.links,r=s[n];r||(s[n]=r=j.tmplFn(n,i,!0)),e=[t,r],e._cp=!0}return e},j._ceo=function e(n){var t,i=n,s=n.length;if(s)for(i=[];s--;)t=n[s],t._jsv&&(t=fe({},t),t.prm=e(t.prm)),i.unshift(t);return i},j._gccb=function(e){return function(n,t,i){var s,r,f,l,o,u,g;if(e&&n){if(n._jsv)return n._jsv.call(e.tmpl,t,e,j);if(n.charAt(0)==="~")return n.slice(0,4)==="~tag"&&(r=e.ctx,n.charAt(4)==="."&&(s=n.slice(5).split("."),r=r.tag),s)?r?[r,s.join("."),t]:[]:(n=n.slice(1).split("."),(l=e.hlp(o=n.shift(),!0))&&(l._cp?(n.length&&(u="."+n.join("."),o=l[g=l.length-1],o._jsv?(o.sb=u,o.bnd=!!i):(l[g]=(o+u).replace("#data.",""),o.slice(0,5)==="#view"&&(l[g]=l[g].slice(6),l.splice(g,0,e)))),f=[l]):(n.length||D(l))&&(f=[l,n.join("."),t])),f||[]);if(n.charAt(0)==="#")return n==="#data"?[]:[e,n.replace(ms,""),t]}}},Zt=j.advSet,j.advSet=function(){Zt.call(j),E._jsv=Se._jsv?fe(E._jsv||{},{views:Me,bindings:Te}):void 0,Qe=Se.linkAttr,Yt=nt+",["+Qe+"]",Re=Se._wm,Re.optgroup=Re.option,Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td},Ie.advanced({linkAttr:"data-link",useViews:!1,noValidate:!1,_wm:{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:d.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},_fe:{input:{from:As,to:"value"},textarea:si,select:si,optgroup:{to:"label"}}}),d},window)});function mt(E){E.fn.checkboxButton=function(x){return this.each(function(){E(this).on("click",function(T){let A=T.target.tagName,I=E(this).find(":checkbox");A!=="INPUT"&&(T.preventDefault(),I.prop("checked",!I.prop("checked")));let J=I.is(":checked");x.call(this,J)},0)})},E.fn.disable=function(){return this.each(function(){let x=E(this);x.addClass("disabled"),x.data("tabindex",x.attr("tabindex")),x.removeAttr("tabindex")})},E.fn.ellipsis=function(x){return this.each(function(){let F=E(this),T=F.text();if(T.length>x){let A=T.substr(0,x);A=A.substr(0,Math.min(A.length,A.lastIndexOf(" "))),F.empty().html(A+"&hellip;")}})},E.fn.ellipsisFill=function(x){let F=!0;return x||(F=!1),this.each(function(){let T=E(this);F||(x=T.text()),T.empty();let A=E('<span title="'+x+'"></span>');if(T.append(A),T.css("overflow","hidden"),A.css("white-space","nowrap"),A.html(x),A.width()>T.width()){let I=null;for(;A.width()>T.width();){let J=A.html();if(J=J.substring(0,J.lastIndexOf(" "))+"&hellip;",J===I)break;A.html(J),I=J}}})},E.fn.ellipsisHtmlFixed=function(x,F){return this.each(function(){let T=E(this),A=T.html(),I=E("<span></span>");if(I.html(T.html().replace(/\s[\s]*/g," ").trim()),I.text().trim().length<=x)return;for(;I.text().trim().length>x;)I.removeLastWord(x);let J=I.html(),H=!1;T.toggle=function(){T.empty();let ne=E('<a href="#" class="toggle"></a>');H?(T.html(A+" "),ne.text("less"),ne.switchClass("less","more")):(T.html(J+"&hellip; "),ne.text("more"),ne.switchClass("more","less")),ne.one("click",function(D){D.preventDefault(),T.toggle()}),H=!H,T.append(ne),F&&F()},T.toggle()})},E.fn.enable=function(){return this.each(function(){let x=E(this);x.removeClass("disabled"),x.attr("tabindex",x.data("tabindex"))})},E.fn.equaliseHeight=function(x,F){let T=-1,A=Number.MAX_VALUE,I=[];x&&this.each(function(){E(this).height("auto")}),this.each(function(){let H=E(this).height();I.push(H),T=T>H?T:H,A=A<H?A:H});let J=T;if(F){I.sort(function(ne,D){return ne-D});let H=Math.floor(I.length/2);I.length%2?J=I[H]:J=(I[H-1]+I[H])/2}return this.each(function(){E(this).height(J)}),this},E.fn.getVisibleElementWithGreatestTabIndex=function(){let x=E(this),F=0,T=null;return x.find("*:visible[tabindex]").each(function(A,I){let J=E(I),H=parseInt(J.attr("tabindex"));H>F&&(F=H,T=J)}),T},E.fn.horizontalMargins=function(){let x=E(this);return parseInt(x.css("marginLeft"))+parseInt(x.css("marginRight"))},E.fn.leftMargin=function(){let x=E(this);return parseInt(x.css("marginLeft"))},E.fn.rightMargin=function(){let x=E(this);return parseInt(x.css("marginRight"))},E.fn.horizontalPadding=function(){let x=E(this);return parseInt(x.css("paddingLeft"))+parseInt(x.css("paddingRight"))},E.fn.leftPadding=function(){let x=E(this);return parseInt(x.css("paddingLeft"))},E.fn.rightPadding=function(){let x=E(this);return parseInt(x.css("paddingRight"))},E.mlp={x:0,y:0};function d(){let x=this===document?E(this):E(this).contents();x.mousemove(function(F){E.mlp={x:F.pageX,y:F.pageY}}),x.find("iframe").on("load",d)}E(d),E.fn.ismouseover=function(){let x=!1;return this.eq(0).each(function(){let F=E(this).is("iframe")?E(this).contents().find("body"):E(this),T=F.offset();x=T.left<=E.mlp.x&&T.left+F.outerWidth()>E.mlp.x&&T.top<=E.mlp.y&&T.top+F.outerHeight()>E.mlp.y}),x};let ie=E.fn.on,U;E.fn.on=function(){let x=Array.apply(null,arguments),F=x[x.length-1];if(isNaN(F)||F===1&&x.pop())return ie.apply(this,x);let T=x.pop(),A=x.pop();return x.push(function(){let I=this,J=arguments;clearTimeout(U),U=setTimeout(function(){A.apply(I,J)},T)}),ie.apply(this,x)},E.fn.onEnter=function(x){return this.each(function(){E(this).on("keyup",function(T){T.keyCode===13&&(T.preventDefault(),x())},0)})},E.fn.onPressed=function(x){return this.each(function(){let F=E(this);F.on("click",function(T){T.preventDefault(),x(T)},0),F.on("keydown",function(T){T.keyCode===13&&(T.preventDefault(),x(T))},0)})},E.fn.removeLastWord=function(x=8,F=0){return this.each(function(){let T=E(this);if(T.contents().length>0){let A=T.contents().last();if(A[0].nodeType===3){let I=A.text().trim().split(" ");if(I.length>1){I.splice(I.length-1,1),A[0].data=I.join(" ");return}else if(typeof x!="undefined"&&I.length===1&&I[0].length>x){A[0].data=I.join(" ").substring(0,x);return}}A.removeLastWord(x,F+1)}else F>0&&T.remove()})},E.fn.switchClass=function(x,F){return this.each(function(){E(this).removeClass(x).addClass(F)})},E.fn.targetBlank=function(){return this.each(function(){E(this).find("a").prop("target","_blank")})},E.fn.toggleExpandText=function(x,F,T,A){return this.each(function(){let I=E(this),J=I.html();if(x>J.length)return;let H=!1,ne=J.substr(0,x);ne=ne.substr(0,Math.min(ne.length,ne.lastIndexOf(" "))),I.toggle=function(){I.empty();let D=E('<a href="#" class="toggle"></a>');H?(I.html(J+"&nbsp;"),D.text(F),D.switchClass("less","more")):(I.html(ne+"&nbsp;"),D.text(T),D.switchClass("more","less")),D.one("click",function(V){V.preventDefault(),I.toggle()}),H=!H,I.append(D),A&&A()},I.toggle()})},E.fn.toggleExpandTextByLines=function(x,F,T,A){return this.each(function(){let I=E(this),J=I.html(),H=E('<span>&hellip; <a href="#" class="toggle more">morepad</a></span>'),ne=[J],D=I.height();for(;I.text().length>0;){I.removeLastWord();let ye=I.html();I.append(H),D>I.height()&&(ne.unshift(ye),D=I.height()),H.remove()}if(ne.length<=x){I.html(J);return}let V=ne[x-1],pe=!1;I.toggle=function(){I.empty();let ye=E('<a href="#" class="toggle"></a>');pe?(I.html(J+" "),ye.text(F),ye.switchClass("less","more")):(I.html(V+"&hellip; "),ye.text(T),ye.switchClass("more","less")),ye.one("click",function(un){un.preventDefault(),I.toggle()}),pe=!pe,I.append(ye),A&&A()},I.toggle()})},E.fn.toggleText=function(x,F){return this.each(function(){E(this).text()===x?E(this).text(F):E(this).text(x)})},E.fn.updateAttr=function(x,F,T){return this.each(function(){let A=E(this),I=A.attr(x);I&&I.indexOf(F)===0&&(I=I.replace(F,T),A.attr(x,I))})},E.fn.verticalMargins=function(){let x=E(this);return parseInt(x.css("marginTop"))+parseInt(x.css("marginBottom"))},E.fn.verticalPadding=function(){let x=E(this);return parseInt(x.css("paddingTop"))+parseInt(x.css("paddingBottom"))}}var _t=class{constructor(){this.events={};this.onPublishHandler=()=>{}}publish(d,ie,U){let x=this.events[d];x&&x.forEach(F=>{F.call(this,ie,U)}),this.onPublishHandler.call(this,d,ie)}subscribe(d,ie){let U=this.events[d];U===void 0&&(U=this.events[d]=[]),U.push(ie)}subscribeAll(d){this.onPublishHandler=d}unsubscribe(d,ie){let U=this.events[d];if(U===void 0)return;let x=U.indexOf(ie);U.splice(x)}unsubscribeAll(){this.onPublishHandler=()=>{}}dispose(){this.events={}}};var le=Bs(Os());var bt=window.$;Fi()(bt);mt(bt);var re={AV:{name:"uv-av-extension",loader:()=>import("./Extension-GPMAYDOT.js")},ALEPH:{name:"uv-aleph-extension",loader:()=>import("./Extension-R4MCQ67K.js")},DEFAULT:{name:"uv-default-extension",loader:()=>import("./Extension-LZ5MUUL4.js")},EBOOK:{name:"uv-ebook-extension",loader:()=>import("./Extension-5VQEUXM6.js")},MEDIAELEMENT:{name:"uv-mediaelement-extension",loader:()=>import("./Extension-74VEGCYG.js")},MODELVIEWER:{name:"uv-model-viewer-extension",loader:()=>import("./Extension-3ONUKKDK.js")},OSD:{name:"uv-openseadragon-extension",loader:()=>import("./Extension-F4XGF7XU.js")},PDF:{name:"uv-pdf-extension",loader:()=>import("./Extension-6WOMIU5N.js")},SLIDEATLAS:{name:"uv-openseadragon-extension",loader:()=>import("./Extension-F4XGF7XU.js")}},Hi=class extends ji{constructor(d,ie,U){super(d,ie,U);this.options=d;this.adapter=ie;this.isFullScreen=!1;this.disposed=!1;this.extra={initial:!1};this.extra.initial=!0,this._pubsub=new _t,this._init(),this.resize(),this.extra.initial=!1}_init(){return this._extensionRegistry={},this._extensionRegistry[le.ExternalResourceType.CANVAS]=re.OSD,this._extensionRegistry[le.ExternalResourceType.DOCUMENT]=re.PDF,this._extensionRegistry[le.ExternalResourceType.IMAGE]=re.OSD,this._extensionRegistry[le.ExternalResourceType.MOVING_IMAGE]=re.MEDIAELEMENT,this._extensionRegistry[le.ExternalResourceType.PHYSICAL_OBJECT]=re.MODELVIEWER,this._extensionRegistry[le.ExternalResourceType.SOUND]=re.MEDIAELEMENT,this._extensionRegistry[le.MediaType.AUDIO_MP4]=re.AV,this._extensionRegistry[le.MediaType.DICOM]=re.ALEPH,this._extensionRegistry[le.MediaType.DRACO]=re.MODELVIEWER,this._extensionRegistry[le.MediaType.EPUB]=re.EBOOK,this._extensionRegistry[le.MediaType.GIRDER]=re.SLIDEATLAS,this._extensionRegistry[le.MediaType.GLB]=re.MODELVIEWER,this._extensionRegistry[le.MediaType.GLTF]=re.MODELVIEWER,this._extensionRegistry[le.MediaType.JPG]=re.OSD,this._extensionRegistry[le.MediaType.MP3]=re.AV,this._extensionRegistry[le.MediaType.MPEG_DASH]=re.AV,this._extensionRegistry[le.MediaType.OPF]=re.EBOOK,this._extensionRegistry[le.MediaType.PDF]=re.PDF,this._extensionRegistry[le.MediaType.USDZ]=re.MODELVIEWER,this._extensionRegistry[le.MediaType.VIDEO_MP4]=re.AV,this._extensionRegistry[le.MediaType.WAV]=re.AV,this._extensionRegistry[le.MediaType.WEBM]=re.AV,this._extensionRegistry[le.RenderingFormat.PDF]=re.PDF,this.on(dn.CREATED,d=>{this.hideSpinner()},!1),this.on(dn.RELOAD,d=>{d.isReload=!0,this.set(d)},!1),this.extra.initial=!0,this.set(this.options.data),this.extra.initial=!1,!0}async _getExtensionByType(d,ie){let U=await d.loader(),x=new U.default;return x.format=ie,x.type=d,x}_getExtensionByFormat(d){return this._extensionRegistry[d]?this._getExtensionByType(this._extensionRegistry[d],d):this._getExtensionByType(re.DEFAULT,d)}set(d,ie){if(ie&&(this.extra.initial=!0),this.extension){let U=Object.assign({},this.extension.data,d);U.isReload||U.iiifManifestId!==this.extension.data.iiifManifestId||U.manifestIndex!==this.extension.data.manifestIndex||U.collectionIndex!==this.extension.data.collectionIndex?(this.extension.data=U,this.showSpinner(),this._reload(this.extension.data)):(this.extension.data=U,this.extension.render())}else{if(!d.iiifManifestId){console.warn("iiifManifestId is required.");return}this._reload(d)}this.extra.initial=!1}publish(d,ie,U){this._pubsub.publish(d,ie,{...this.extra,...U})}subscribe(d,ie){return this._pubsub.subscribe(d,ie),()=>{this._pubsub.unsubscribe(d,ie)}}subscribeAll(d){return this._pubsub.subscribeAll(d),()=>{this._pubsub.unsubscribeAll()}}dispose(){super.dispose(),this._pubsub.dispose(),this.extension?.dispose(),this.disposed=!0}async _reload(d){this._pubsub.dispose(),d.target="",this.subscribe(dn.RELOAD,F=>{this.fire(dn.RELOAD,F)}),bt(this.options.target).empty();let U=this,x;try{x=await Si({manifestUri:d.iiifManifestId,collectionIndex:d.collectionIndex,manifestIndex:d.manifestIndex||0,canvasId:d.canvasId,canvasIndex:d.canvasIndex||0,rangeId:d.rangeId,locale:d.locales?d.locales[0].name:void 0});let F=x.getTrackingLabel();F&&(F+=", URI: "+(window.location!==window.parent.location)?document.referrer:document.location,window.trackingLabel=F);let T;if(T=x.getCurrentCanvas(),!T){U._error(`Canvas ${d.canvasIndex} not found.`);return}let A,I=T.getContent(),J;if(I.length){let V=I[0].getBody();if(V&&V.length)if(J=V[0].getFormat(),J){if(A=await U._getExtensionByFormat(J),!A){let pe=V[0].getType();pe&&(A=await U._getExtensionByFormat(pe))}}else{let pe=V[0].getType();pe&&(A=await U._getExtensionByFormat(pe))}}else{let D=T.getType();if(D&&(A=await U._getExtensionByFormat(D)),!A){let V=T.getProperty("format");A=await U._getExtensionByFormat(V)}}let H=x.getRanges().length>0;A.type===re.AV&&!H&&(A=await U._getExtensionByType(re.MEDIAELEMENT,J)),A||(A=await U._getExtensionByFormat(re.DEFAULT.name)),d.locales||(d.locales=[],d.locales.push(Ti));let ne=await A.loadConfig(d.locales[0].name);d.config=await U.configure(ne),U._createExtension(A,d,x)}catch{this.hideSpinner(),alert("Unable to load manifest")}}_error(d){this.fire(dn.ERROR,d)}_createExtension(d,ie,U){this.extension=d,this.extension&&(this.extension.extensionHost=this,this.extension.data=ie,this.extension.helper=U,this.extension.create())}exitFullScreen(){this.extension&&this.extension.exitFullScreen()}resize(){this.extension&&!this.disposed&&this.extension.resize()}};export{Hi as default};
/*! includes JsRender, JsObservable and JsViews - see: http://jsviews.com/#download */
/*! jsviews.js v0.9.83 (Beta) single-file version: http://jsviews.com/ */
